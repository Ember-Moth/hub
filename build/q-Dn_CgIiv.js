import{u as a,_hW as l}from"./q-Q7QTf1-t.js";import{r as c}from"./q-CXrtXnGn.js";import"./q-BKaOGYNW.js";import"./q-D3Ga_9CS.js";import"./q-Cfw5b693.js";import"./q-R_PFgutd.js";import"./q-CX_U-nEJ.js";import"./q-C6JuRMDH.js";import"./q-B-GNphMI.js";import"./q-DTPKyc3d.js";import"./q-bWKQX6P2.js";async function f(e,t){return c("/v1/public/ticket/",{method:"PUT",headers:{"Content-Type":"application/json"},data:e})}async function g(e,t){return c("/v1/public/ticket/",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function y(e,t){return c("/v1/public/ticket/detail",{method:"GET",params:{...e}})}async function k(e,t){return c("/v1/public/ticket/follow",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function h(e,t){return c("/v1/public/ticket/list",{method:"GET",params:{...e}})}const T=async e=>{const[t,i]=a();if(i.loading.update)return null;i.loading.update=!0;try{const n=await k(e);return i.selected&&i.selected.id===e.ticket_id&&await t(),n}catch{return null}finally{i.loading={...i.loading,update:!1}}},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_ehYpNb4GCg8:T},Symbol.toStringTag,{value:"Module"})),b=async e=>{const[t,i,n]=a();if(n.loading.update)return null;n.loading.update=!0;try{const o=await f(e);return n.selected&&n.selected.id===e.id&&await t(),await i(),o}catch{return null}finally{n.loading.update=!1}},L=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_xZwY1Ws9qyA:b},Symbol.toStringTag,{value:"Module"})),S=({track:e,cleanup:t})=>{var d;const[i,n]=a(),o=e(()=>n.selected),u=e(()=>n.meta.chat);let r=null;const s=()=>{r&&(clearInterval(r),r=null)},_=()=>{s(),u&&(o!=null&&o.id)&&(i(),r=setInterval(()=>{var p;if(((p=n.detail)==null?void 0:p.status)===4){s();return}i()},5e3))};o!=null&&o.id&&((d=n.detail)==null?void 0:d.id)!==o.id&&(n.detail=null,i()),u&&(o!=null&&o.id)?_():s(),t(()=>{s()})},R=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_eah4qQsrd2s:S},Symbol.toStringTag,{value:"Module"})),O=async e=>{const[t,i]=a();if(i.loading.create)return null;i.loading.create=!0;try{const n=await g(e);return await t(),n}catch{return null}finally{i.loading.create=!1}},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_N9dlQuk9yMo:O},Symbol.toStringTag,{value:"Module"})),j=async e=>{var n;const[t]=a(),i=e||((n=t.selected)==null?void 0:n.id);if(!(!i||t.loading.detail)){t.loading.detail=!0;try{const{data:o}=await y({id:Number(i)});t.detail=o.data||null}catch{t.detail=null}finally{t.loading.detail=!1}}},x=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_0DI0d31WwOM:j},Symbol.toStringTag,{value:"Module"})),w=async e=>{const[t]=a();if(!t.loading.list){t.loading.list=!0;try{const{data:i}=await h({page:(e==null?void 0:e.page)||t.params.page,size:(e==null?void 0:e.size)||t.params.size,...e||{}});i.data&&(t.list=i.data.list||[],t.pagination.total=i.data.total||0,t.pagination.current=(e==null?void 0:e.page)||t.params.page||1,t.pagination.size=(e==null?void 0:e.size)||t.params.size||10,t.pagination.hasMore=t.pagination.total>t.pagination.current*t.pagination.size,t.params={...t.params,...e||{}})}catch{t.list=[]}finally{t.loading.list=!1}}},G=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_RNihBR6chPQ:w},Symbol.toStringTag,{value:"Module"}));export{l as _hW,L as a,R as b,W as c,x as d,G as e,j as s_0DI0d31WwOM,O as s_N9dlQuk9yMo,w as s_RNihBR6chPQ,S as s_eah4qQsrd2s,T as s_ehYpNb4GCg8,b as s_xZwY1Ws9qyA,C as t};
