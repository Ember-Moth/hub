import{u as _,c as R,t as D,v as z,a as V,A as T,q as i,D as q,o as M,d as n,m as l,l as t,k,f as b,F as A,_hW as x}from"./q-Q7QTf1-t.js";import{_ as c}from"./q-BKaOGYNW.js";import{G as f,B as S,Q as d,T as P,R as g,c as $}from"./q-CXrtXnGn.js";import{M as w,a0 as E,R as B,h as O,L as h,z as U,a1 as Q,a2 as F}from"./q-Cfw5b693.js";import{a0 as j}from"./q-D3Ga_9CS.js";import{f as C}from"./q-bWKQX6P2.js";import"./q-R_PFgutd.js";import{D as X}from"./q-xouav5_y.js";import{t as y}from"./q-B-GNphMI.js";import{I as Y}from"./q-C6JuRMDH.js";import"./q-CX_U-nEJ.js";import"./q-DTPKyc3d.js";const G=()=>{const[o]=_();o.fetchTicketList({search:o.ticketStore.meta.search})},N=Object.freeze(Object.defineProperty({__proto__:null,s_dw4GpzgBbR4:G},Symbol.toStringTag,{value:"Module"})),Z=()=>{const[o]=_();o.ticketStore.meta.create=!1,o.ticketStore.list.length>0&&!o.ticketStore.selected&&(o.ticketStore.selected=o.ticketStore.list[0])},K=Object.freeze(Object.defineProperty({__proto__:null,s_3XS2LY3S0Sk:Z},Symbol.toStringTag,{value:"Module"})),W=(o,s)=>{const[e]=_();return e.ticketStore.meta.form.title=s.value},H=Object.freeze(Object.defineProperty({__proto__:null,s_n8DTaLAECy4:W},Symbol.toStringTag,{value:"Module"})),J=(o,s)=>{const[e]=_();e.ticketStore.meta.search=s.value},ee=Object.freeze(Object.defineProperty({__proto__:null,s_BXtaajDf2DU:J},Symbol.toStringTag,{value:"Module"})),te=(o,s)=>{const[e]=_();e.ticketStore.meta.search=s.value},oe=Object.freeze(Object.defineProperty({__proto__:null,s_Re9guE949j0:te},Symbol.toStringTag,{value:"Module"})),se=()=>{const[o]=_();o.ticketStore.selected=null,o.ticketStore.meta.create=!0},le=Object.freeze(Object.defineProperty({__proto__:null,s_Tm1F1GP5s0Q:se},Symbol.toStringTag,{value:"Module"})),re=o=>{const[s]=_();o.key==="Enter"&&s.fetchTicketList({search:s.ticketStore.meta.search})},ne=Object.freeze(Object.defineProperty({__proto__:null,s_gZzjLVvV20g:re},Symbol.toStringTag,{value:"Module"})),ie=()=>{const[o]=_();o.ticketStore.selected=null,o.ticketStore.meta.create=!0},ce=Object.freeze(Object.defineProperty({__proto__:null,s_Ae8CTZ3K9kw:ie},Symbol.toStringTag,{value:"Module"})),ae=async()=>{var u;const[o]=_(),s=o.ticketStore.meta.message.trim();if(!s)return;const e=(u=o.ticketStore.selected)==null?void 0:u.id;e&&(await o.addTicketReply({ticket_id:e,content:s,type:1,from:"User"}),o.ticketStore.meta.message="")},_e=Object.freeze(Object.defineProperty({__proto__:null,s_2Ij1zC0qh1Q:ae},Symbol.toStringTag,{value:"Module"})),de=(o,s)=>{const[e]=_();return e.ticketStore.meta.message=s.value},ue=Object.freeze(Object.defineProperty({__proto__:null,s_UWZcBV60A2Q:de},Symbol.toStringTag,{value:"Module"})),me={...X,params:{page:1,size:10}},L=R("ticket-store"),ke=o=>{const s={...me,...o},e=D(s);return z(L,e),e},fe=()=>{const o=V(L),s=i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.e),[]),"s_RNihBR6chPQ",[o]),e=i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.d),[]),"s_0DI0d31WwOM",[o]),u=i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.c),[]),"s_N9dlQuk9yMo",[s,o]),a=i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.a),[]),"s_xZwY1Ws9qyA",[e,s,o]),p=i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.t),[]),"s_ehYpNb4GCg8",[e,o]);return T(i(()=>c(()=>import("./q-Dn_CgIiv.js").then(m=>m.b),[]),"s_eah4qQsrd2s",[e,o])),{ticketStore:o,fetchTicketList:s,fetchTicketDetail:e,createTicket:u,updateTicketStatus:a,addTicketReply:p}},pe=()=>{var p,m,v;q();const o={1:{text:`å¾…å¤„ç†`,class:"bg-primary"},2:{text:`å¤„ç†ä¸­`,class:"bg-warning"},3:{text:`å·²è§£å†³`,class:"bg-green-500"},4:{text:`å·²å…³é—­`,class:"bg-green-500"}},s={category:`è¯·é€‰æ‹©ä¸€ä¸ªç±»åˆ«`,title:`è¯·æä¾›æ ‡é¢˜`,content:`è¯·æä¾›å†…å®¹`};ke({meta:{create:!1,chat:!1,search:"",form:{title:"",content:"",category:""},message:""}});const e=fe(),u=M(!1);T(i(()=>c(()=>Promise.resolve().then(()=>Qe),void 0),"s_ySfP4N8bIfo",[e]));const a=M();return T(i(()=>c(()=>Promise.resolve().then(()=>Be),void 0),"s_BELGhtY8e0o",[a,e])),n("div",null,{class:"container mx-auto px-4 py-5"},n("div",null,{class:"flex h-[calc(100vh-160px)] flex-col gap-5 lg:flex-row"},[e.ticketStore.list.length>0&&l(f.Root,{class:w("h-full w-full flex-shrink-0 flex-col overflow-hidden lg:w-80",e.ticketStore.selected||e.ticketStore.meta.create?"hidden lg:flex":"flex"),children:[l(f.Header,{class:"flex-shrink-0 border-b p-5",children:[n("div",null,{class:"flex w-full items-center justify-between"},[l(f.Title,{children:`æˆ‘çš„å·¥å•`},1,"SM_0"),l(S,{size:"sm",look:"outline",onClick$:i(()=>c(()=>Promise.resolve().then(()=>ce),void 0),"s_Ae8CTZ3K9kw",[e]),children:[l(E,{class:"mr-1 h-4 w-4",[t]:{class:t}},3,"SM_1"),`åˆ›å»º`],[t]:{size:t,look:t,onClick$:t}},1,"SM_2")],1,null),l(j,{placeholder:`æœç´¢å·¥å•...`,ghost:!0,get value(){return e.ticketStore.meta.search},onInput$:i(()=>c(()=>Promise.resolve().then(()=>ee),void 0),"s_BXtaajDf2DU",[e]),onChange$:i(()=>c(()=>Promise.resolve().then(()=>oe),void 0),"s_Re9guE949j0",[e]),onKeyUp$:i(()=>c(()=>Promise.resolve().then(()=>ne),void 0),"s_gZzjLVvV20g",[e]),children:n("div",{"q:slot":"suffix"},{class:"bg-accent flex cursor-pointer items-center px-3"},l(B,{class:"text-lg",onClick$:i(()=>c(()=>Promise.resolve().then(()=>N),void 0),"s_dw4GpzgBbR4",[e]),[t]:{class:t,onClick$:t}},3,"SM_3"),1,null),[t]:{ghost:t,value:k(r=>r.ticketStore.meta.search,[e]),onInput$:t,onChange$:t,onKeyUp$:t}},1,"SM_4")],[t]:{class:t}},1,"SM_5"),l(f.Content,{class:"flex-grow divide-y overflow-y-auto p-0",children:e.ticketStore.list.map(r=>{var I;return n("div",{class:`hover:bg-accent/50 cursor-pointer p-4 ${((I=e.ticketStore.selected)==null?void 0:I.id)===r.id?"bg-accent":""}`,onClick$:i(()=>c(()=>Promise.resolve().then(()=>xe),void 0),"s_lyiatwp9Er8",[r,e])},null,n("div",null,{class:"flex items-center"},[n("div",{class:`mr-3 h-2 w-2 flex-shrink-0 rounded-full ${o[r.status].class||"bg-primary"}`},null,null,3,null),n("div",null,{class:"min-w-0 flex-1"},[n("div",null,{class:"flex items-center justify-between"},[n("h3",null,{class:"truncate text-sm font-medium"},b(r,"title"),1,null),n("span",null,{class:"text-muted-foreground ml-2 text-xs"},C(r.created_at,!1),1,null)],1,null),n("div",null,{class:"mt-1 flex items-center justify-between"},n("p",null,{class:"text-muted-foreground truncate text-xs"},b(o[r.status],"text"),1,null),1,null)],1,null)],1,null),0,r.id)}),[t]:{class:t}},1,"SM_6")]},1,"SM_7"),e.ticketStore.meta.create&&l(f.Root,{class:"flex h-full flex-1 flex-col",children:[l(f.Header,{class:"flex-shrink-0 border-b p-5",children:n("div",null,{class:"flex w-full items-center justify-between"},l(S,{look:"ghost",size:"sm",onClick$:i(()=>c(()=>Promise.resolve().then(()=>K),void 0),"s_3XS2LY3S0Sk",[e]),children:[l(O,{class:"h-5 w-5",[t]:{class:t}},3,"SM_8"),`åˆ›å»ºå·¥å•`],[t]:{look:t,size:t,onClick$:t}},1,"SM_9"),1,null),[t]:{class:t}},1,"SM_10"),l(f.Content,{class:"flex-grow space-y-4 overflow-y-auto p-5",children:[l(d.Root,{class:"w-60",get value(){return e.ticketStore.meta.form.category},onChange$:i(()=>c(()=>Promise.resolve().then(()=>ge),void 0),"s_3xgZciV3UIE",[e]),children:[l(d.Label,{children:`é—®é¢˜ç±»åˆ«`},1,"SM_11"),l(d.Trigger,{children:l(d.DisplayValue,{placeholder:`é€‰æ‹©ä¸€ä¸ªç±»åˆ«`},3,"SM_12")},1,"SM_13"),l(d.Popover,{gutter:8,children:[l(d.Item,{children:[l(d.ItemLabel,{children:`è´¦å•é—®é¢˜`},1,"SM_14"),l(d.ItemIndicator,{children:l(h,{class:"h-4 w-4",[t]:{class:t}},3,"SM_15")},1,"SM_16")]},1,"SM_17"),l(d.Item,{children:[l(d.ItemLabel,{children:`æŠ€æœ¯æ”¯æŒ`},1,"SM_18"),l(d.ItemIndicator,{children:l(h,{class:"h-4 w-4",[t]:{class:t}},3,"SM_19")},1,"SM_20")]},1,"SM_21"),l(d.Item,{children:[l(d.ItemLabel,{children:`äº§å“å’¨è¯¢`},1,"SM_22"),l(d.ItemIndicator,{children:l(h,{class:"h-4 w-4",[t]:{class:t}},3,"SM_23")},1,"SM_24")]},1,"SM_25"),l(d.Item,{children:[l(d.ItemLabel,{children:`åé¦ˆä¸Žå»ºè®®`},1,"SM_26"),l(d.ItemIndicator,{children:l(h,{class:"h-4 w-4",[t]:{class:t}},3,"SM_27")},1,"SM_28")]},1,"SM_29"),l(d.Item,{children:[l(d.ItemLabel,{children:`å…¶ä»–`},1,"SM_30"),l(d.ItemIndicator,{children:l(h,{class:"h-4 w-4",[t]:{class:t}},3,"SM_31")},1,"SM_32")]},1,"SM_33")],[t]:{gutter:t}},1,"SM_34")],[t]:{class:t,value:k(r=>r.ticketStore.meta.form.category,[e])}},0,"SM_35"),l(j,{ghost:!0,label:`å·¥å•æ ‡é¢˜`,placeholder:`ç®€è¦æè¿°æ‚¨çš„é—®é¢˜`,get value(){return e.ticketStore.meta.form.title},onInput$:i(()=>c(()=>Promise.resolve().then(()=>H),void 0),"s_n8DTaLAECy4",[e]),[t]:{ghost:t,value:k(r=>r.ticketStore.meta.form.title,[e]),onInput$:t}},3,"SM_36"),l(P,{ghost:!0,label:`é—®é¢˜æè¿°`,placeholder:`è¯·æä¾›æœ‰å…³æ‚¨é—®é¢˜çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä¸ºæ‚¨æœåŠ¡`,rows:6,get value(){return e.ticketStore.meta.form.content},onInput$:i(()=>c(()=>Promise.resolve().then(()=>De),void 0),"s_8duko1Toxdc",[e]),[t]:{ghost:t,rows:t,value:k(r=>r.ticketStore.meta.form.content,[e]),onInput$:t}},3,"SM_37"),n("div",null,{class:"flex justify-end space-x-3 pt-2"},[e.ticketStore.list.length>0&&l(S,{look:"outline",onClick$:i(()=>c(()=>Promise.resolve().then(()=>Ve),void 0),"s_Vf8nUwJ9X98",[e]),children:`å–æ¶ˆ`,[t]:{look:t,onClick$:t}},1,"SM_38"),l(S,{get loading(){return e.ticketStore.loading.create},onClick$:i(()=>c(()=>Promise.resolve().then(()=>ve),void 0),"s_E4uMqu6GSY8",[s,e]),children:`æäº¤å·¥å•`,[t]:{loading:k(r=>r.ticketStore.loading.create,[e])}},1,"SM_39")],1,null)],[t]:{class:t}},1,"SM_40")],[t]:{class:t}},1,"SM_41"),e.ticketStore.selected&&l(f.Root,{class:"flex h-full flex-1 flex-col",children:[l(f.Header,{class:"flex-shrink-0 border-b p-5",children:n("div",null,{class:"flex w-full items-center justify-between"},[l(S,{look:"ghost",size:"sm",onClick$:i(()=>c(()=>Promise.resolve().then(()=>Me),void 0),"s_y0N0kLlPEcQ",[e]),children:[l(O,{class:"h-5 w-5",[t]:{class:t}},3,"SM_42"),k(r=>r.ticketStore.selected.title,[e])],[t]:{look:t,size:t,onClick$:t}},1,"SM_43"),e.ticketStore.selected.status!==4&&l(g.Root,{"bind:show":u,children:[l(g.Trigger,{get class(){return $({look:"ghost",size:"sm",class:"bg-alert/10 text-alert hover:bg-alert/20 h-9"})},children:[l(U,{class:"mr-1 h-4 w-4",[t]:{class:t}},3,"SM_44"),`å…³é—­å·¥å•`],[t]:{class:t}},1,"SM_45"),l(g.Panel,{class:"max-w-md",children:[l(g.Title,{children:`å…³é—­å·¥å•`},1,"SM_46"),l(g.Description,{children:`æ‚¨ç¡®å®šè¦å…³é—­æ­¤å·¥å•å—ï¼Ÿå…³é—­åŽæ‚¨å°†æ— æ³•å›žå¤ã€‚`},1,"SM_47"),n("footer",null,{class:"flex justify-end space-x-3 pt-2"},[l(S,{look:"outline",size:"sm",onClick$:i(()=>c(()=>Promise.resolve().then(()=>Le),void 0),"s_EXFIVfQo0NE",[u,e]),children:`å–æ¶ˆ`,[t]:{look:t,size:t,onClick$:t}},1,"SM_48"),l(S,{look:"alert",size:"sm",get loading(){return e.ticketStore.loading.update},onClick$:i(()=>c(()=>Promise.resolve().then(()=>ye),void 0),"s_93R0YjiPR6M",[u,e]),children:`ç¡®è®¤å…³é—­`,[t]:{look:t,size:t,loading:k(r=>r.ticketStore.loading.update,[e]),onClick$:t}},1,"SM_49")],1,null)],[t]:{class:t}},1,"SM_50")],[t]:{"bind:show":t}},1,"SM_51")],1,null),[t]:{class:t}},1,"SM_52"),l(f.Content,{class:"flex flex-grow flex-col overflow-hidden p-0",children:n("div",{ref:a},{class:"bg-accent/20 flex-1 overflow-y-auto p-4"},[{id:0,from:"User",type:1,content:(p=e.ticketStore.detail)==null?void 0:p.description,created_at:((m=e.ticketStore.detail)==null?void 0:m.created_at)||Date.now()},...((v=e.ticketStore.detail)==null?void 0:v.follow)||[]].map(r=>n("div",{class:`mb-4 flex ${r.from!=="System"?"justify-end":"justify-start"}`},null,n("div",{class:`max-w-[75%] ${r.from!=="System"?"order-2":""}`},null,[n("div",{class:`rounded-lg p-3 ${r.from!=="System"?"bg-primary text-primary-foreground rounded-br-none":"bg-accent rounded-tl-none"}`},null,[r.type===1&&n("p",null,{class:"text-sm"},b(r,"content"),1,"SM_53"),r.type===2&&n("img",{src:b(r,"content"),alt:`é™„ä»¶`,onClick$:i(()=>c(()=>Promise.resolve().then(()=>Ae),void 0),"s_n9emdKhd2OI",[r])},{class:"!h-auto !w-48 rounded-lg object-cover",width:200,height:200,loading:"lazy",decoding:"async"},null,2,"SM_54")],1,null),n("p",{class:`mt-1 text-xs ${r.from!=="System"?"text-right":""} text-muted-foreground`},null,C(r.created_at),1,null)],1,null),1,r.id)),1,null),[t]:{class:t}},1,"SM_55"),l(f.Footer,{class:"relative border-t p-1 md:p-5",children:[e.ticketStore.selected.status!==4&&l(A,{children:[l(P,{ghost:!0,placeholder:`è¾“å…¥æ‚¨çš„æ¶ˆæ¯...`,rows:6,get value(){return e.ticketStore.meta.message},onInput$:i(()=>c(()=>Promise.resolve().then(()=>ue),void 0),"s_UWZcBV60A2Q",[e]),[t]:{ghost:t,rows:t,value:k(r=>r.ticketStore.meta.message,[e]),onInput$:t}},3,"SM_56"),n("div",null,{class:"absolute bottom-2 left-0 flex h-9 w-full items-center justify-between px-2 md:bottom-7 md:px-8"},[n("label",{class:w("inline-flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border",e.ticketStore.loading.update?"cursor-not-allowed opacity-50":"hover:bg-accent")},null,[l(Q,{class:"h-4 w-4",[t]:{class:t}},3,"SM_57"),n("input",null,{type:"file",class:"sr-only",accept:"image/*",disabled:k(r=>r.ticketStore.loading.update,[e]),onChange$:i(()=>c(()=>Promise.resolve().then(()=>je),void 0),"s_XoV4QwFiDMk",[e])},null,3,null)],1,null),l(S,{class:"rounded-full",look:"primary",size:"sm",get disabled(){return!e.ticketStore.meta.message.trim()||e.ticketStore.loading.update},get loading(){return e.ticketStore.loading.update},onClick$:i(()=>c(()=>Promise.resolve().then(()=>_e),void 0),"s_2Ij1zC0qh1Q",[e]),children:[l(F,{class:"mr-1 h-4 w-4",[t]:{class:t}},3,"SM_58"),`å‘é€`],[t]:{class:t,look:t,size:t,disabled:k(r=>!r.ticketStore.meta.message.trim()||r.ticketStore.loading.update,[e]),loading:k(r=>r.ticketStore.loading.update,[e]),onClick$:t}},1,"SM_59")],1,null)]},1,"SM_60"),e.ticketStore.selected.status===4&&n("div",null,{class:"bg-card flex flex-shrink-0 items-center justify-center border-t p-4 text-center"},n("div",null,{class:"text-muted-foreground"},[n("p",null,{class:"mb-1"},`æ­¤å·¥å•å·²å…³é—­`,1,null),n("p",null,{class:"text-xs"},`å¦‚æžœæ‚¨éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·åˆ›å»ºæ–°çš„å·¥å•`,1,null)],1,null),1,"SM_61")],[t]:{class:t}},1,"SM_62")],[t]:{class:t}},1,"SM_63"),!e.ticketStore.selected&&!e.ticketStore.meta.create&&n("div",null,{class:"flex h-full flex-1 flex-col items-center justify-center px-4 py-20 text-center"},[n("div",null,{class:"mb-5 text-5xl"},"ðŸ’¬",3,null),n("h2",null,{class:"mb-2 text-xl font-medium"},`é€‰æ‹©ä¸€ä¸ªå·¥å•ä»¥å¼€å§‹å¯¹è¯`,1,null),n("p",null,{class:"text-muted-foreground mb-5"},`æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„`,1,null),l(S,{onClick$:i(()=>c(()=>Promise.resolve().then(()=>le),void 0),"s_Tm1F1GP5s0Q",[e]),children:[l(E,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"SM_64"),`åˆ›å»ºå·¥å•`],[t]:{onClick$:t}},1,"SM_65")],1,"SM_66")],1,null),1,"SM_67")},ot=Object.freeze(Object.defineProperty({__proto__:null,s_jDepb9WznXk:pe},Symbol.toStringTag,{value:"Module"})),Se=o=>{const[s]=_();s.ticketStore.meta.form.category=o},ge=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_3xgZciV3UIE:Se},Symbol.toStringTag,{value:"Module"})),he=async()=>{const[o,s]=_(),e=s.ticketStore.meta.form;if(!e.category){y.error(o.category);return}if(!e.title){y.error(o.title);return}if(!e.content){y.error(o.content);return}await s.createTicket({title:`[${e.category}]${e.title}`,description:`${e.content}`}),s.ticketStore.meta.form={title:"",content:"",category:""},s.ticketStore.meta.create=!1,s.ticketStore.list.length>0&&(s.ticketStore.selected=s.ticketStore.list[0],s.ticketStore.meta.chat=!0)},ve=Object.freeze(Object.defineProperty({__proto__:null,s_E4uMqu6GSY8:he},Symbol.toStringTag,{value:"Module"})),be=async()=>{var e;const[o,s]=_();(e=s.ticketStore.selected)!=null&&e.id&&(await s.updateTicketStatus({id:s.ticketStore.selected.id,status:4}),o.value=!1,s.ticketStore.meta.chat=!1,s.ticketStore.selected=null)},ye=Object.freeze(Object.defineProperty({__proto__:null,s_93R0YjiPR6M:be},Symbol.toStringTag,{value:"Module"})),Te=()=>{const[o,s]=_();s.ticketStore.selected=o,s.ticketStore.meta.create=!1,s.ticketStore.meta.chat=!0},xe=Object.freeze(Object.defineProperty({__proto__:null,s_lyiatwp9Er8:Te},Symbol.toStringTag,{value:"Module"})),Ie=()=>{const[o]=_();o.ticketStore.selected=null},Me=Object.freeze(Object.defineProperty({__proto__:null,s_y0N0kLlPEcQ:Ie},Symbol.toStringTag,{value:"Module"})),Pe=async o=>{var s;try{const e=new FormData;e.append("image",o);const a=await(await fetch(`https://api.imgbb.com/1/upload?key=${Y}&expiration=2592000`,{method:"POST",body:e})).json();return a.success?{success:!0,url:a.data.url}:{success:!1,url:"",error:((s=a.error)==null?void 0:s.message)||"Upload failed"}}catch(e){return{success:!1,url:"",error:e instanceof Error?e.message:"Unknown error occurred during upload"}}},we=o=>new Promise((s,e)=>{if(o.size>1048576){e(new Error("File size exceeds 1MB limit for base64 encoding"));return}const u=new FileReader;u.onload=a=>{var p;(p=a.target)!=null&&p.result?s(a.target.result):e(new Error("File reading failed"))},u.onerror=a=>e(a),u.readAsDataURL(o)}),Ee=async o=>{const s=await Pe(o);if(s.success)return s.url;if(o.size>1048576)throw new Error("Remote upload failed and file size exceeds 1MB limit for base64 encoding");try{return await we(o)}catch{throw new Error("Image processing failed")}},Oe=async(o,s)=>{var p,m;const[e]=_(),u=(p=e.ticketStore.selected)==null?void 0:p.id;if(!u)return;const a=(m=s.files)==null?void 0:m[0];if(a)try{const v=await Ee(a);await e.addTicketReply({ticket_id:u,content:v,type:2,from:"User"})}finally{s.value=""}},je=Object.freeze(Object.defineProperty({__proto__:null,s_XoV4QwFiDMk:Oe},Symbol.toStringTag,{value:"Module"})),Ce=()=>{const[o,s]=_();o.value=!1,s.ticketStore.meta.chat=!1},Le=Object.freeze(Object.defineProperty({__proto__:null,s_EXFIVfQo0NE:Ce},Symbol.toStringTag,{value:"Module"})),Re=(o,s)=>{const[e]=_();return e.ticketStore.meta.form.content=s.value},De=Object.freeze(Object.defineProperty({__proto__:null,s_8duko1Toxdc:Re},Symbol.toStringTag,{value:"Module"})),ze=()=>{const[o]=_();o.ticketStore.meta.create=!1,o.ticketStore.meta.chat=!1},Ve=Object.freeze(Object.defineProperty({__proto__:null,s_Vf8nUwJ9X98:ze},Symbol.toStringTag,{value:"Module"})),qe=()=>{const[o]=_();window.open(o.content,"_blank")},Ae=Object.freeze(Object.defineProperty({__proto__:null,s_n9emdKhd2OI:qe},Symbol.toStringTag,{value:"Module"})),$e=({track:o})=>{var u;const[s,e]=_();o(()=>{var a;return(a=e.ticketStore.detail)==null?void 0:a.follow}),o(()=>s.value),s.value&&((u=e.ticketStore.detail)!=null&&u.follow)&&setTimeout(()=>{var a;(a=s.value)==null||a.scrollTo({top:s.value.scrollHeight,behavior:"smooth"})},100)},Be=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_BELGhtY8e0o:$e},Symbol.toStringTag,{value:"Module"})),Ue=async({track:o})=>{const[s]=_();o(()=>!0),await s.fetchTicketList()},Qe=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_ySfP4N8bIfo:Ue},Symbol.toStringTag,{value:"Module"}));export{x as _hW,ot as i,ae as s_2Ij1zC0qh1Q,Z as s_3XS2LY3S0Sk,Se as s_3xgZciV3UIE,Re as s_8duko1Toxdc,be as s_93R0YjiPR6M,ie as s_Ae8CTZ3K9kw,$e as s_BELGhtY8e0o,J as s_BXtaajDf2DU,he as s_E4uMqu6GSY8,Ce as s_EXFIVfQo0NE,te as s_Re9guE949j0,se as s_Tm1F1GP5s0Q,de as s_UWZcBV60A2Q,ze as s_Vf8nUwJ9X98,Oe as s_XoV4QwFiDMk,G as s_dw4GpzgBbR4,re as s_gZzjLVvV20g,pe as s_jDepb9WznXk,Te as s_lyiatwp9Er8,W as s_n8DTaLAECy4,qe as s_n9emdKhd2OI,Ie as s_y0N0kLlPEcQ,Ue as s_ySfP4N8bIfo};
