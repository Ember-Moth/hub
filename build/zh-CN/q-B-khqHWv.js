import{u as d,v as I,o as n,m as e,e as i,l as a,q as u,_ as g}from"./q-gSxxJeWo.js";import{t as b}from"./q-CRLhHez8.js";import{_ as c}from"./q-BKaOGYNW.js";import{G as _,B as S}from"./q-BG3_QTyM.js";import{W as x}from"./q-B5TFmh5c.js";import{a0 as v,a1 as y}from"./q-DuNBRwv3.js";import{S as P}from"./q-BHN7C-TJ.js";import"./q-CvYgVdLJ.js";import{u as q}from"./q-CTSOZNae.js";import"./q-C_B9_CLk.js";import"./q-C2B8HMMM.js";import"./q-DXZy683x.js";import"./q-Am9eSDJS.js";import"./q-BQapYjCx.js";import"./q-BMQMcSac.js";import"./q-C0whS16-.js";const C=async()=>{const[o,r,s]=d();if(!o.mobile||!o.code){b.error(r.incomplete);return}await s.updateMobile(o),b.success(r.success),o.mobile="",o.code=""},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:g,s_IhD8n9g2G0U:C},Symbol.toStringTag,{value:"Module"})),W=()=>{var p,m;const o=q(),r={incomplete:`请填写完整的手机号码和验证码`,success:`手机号码更新成功`},s=(m=(p=o.userStore.detail)==null?void 0:p.auth_methods.find(l=>l.auth_type==="mobile"))==null?void 0:m.auth_identifier,t=I({mobile:"",code:"",area_code:"1"}),h=u(()=>c(()=>Promise.resolve().then(()=>T),void 0),"s_IhD8n9g2G0U",[t,r,o]);return n(_.Root,{class:"flex flex-col",children:[n(_.Header,{children:i("div",null,{class:"flex items-center gap-2"},[i("div",null,{class:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-lg"},n(x,{class:"text-primary h-4 w-4",[e]:{class:e}},3,"lv_17"),1,null),n(_.Title,{children:`手机绑定`},1,"lv_18")],1,null)},1,"lv_19"),n(_.Content,{class:"space-y-4 border-t p-5",children:[i("div",null,{class:"text-foreground/70 mb-2 text-sm"},[`当前手机`,":"," ",s||`未绑定`],1,null),n(v,{ghost:!0,label:`新手机`,type:"tel",placeholder:`请输入您要绑定的手机号码`,get value(){return t.mobile},onInput$:u(()=>c(()=>Promise.resolve().then(()=>M),void 0),"s_5VK0dKaN4Zg",[t]),children:i("div",{"q:slot":"prefix"},null,n(y,{onChange$:u(()=>c(()=>Promise.resolve().then(()=>D),void 0),"s_qCxDKclpgKg",[t])},2,"lv_20"),1,null),[e]:{ghost:e,type:e,value:a(l=>l.mobile,[t]),onInput$:e}},1,"lv_21"),n(v,{ghost:!0,label:`验证码`,placeholder:`请输入验证码`,get value(){return t.code},onInput$:u(()=>c(()=>Promise.resolve().then(()=>j),void 0),"s_HRjqFOQPHIA",[t]),children:i("div",{"q:slot":"suffix"},null,n(P,{type:"mobile",get params(){return{telephone:t.mobile,telephone_area_code:t.area_code,type:1}},[e]:{type:e,params:a(l=>({telephone:l.mobile,telephone_area_code:l.area_code,type:1}),[t])}},3,"lv_22"),1,null),[e]:{ghost:e,value:a(l=>l.code,[t]),onInput$:e}},1,"lv_23")],[e]:{class:e}},1,"lv_24"),n(_.Footer,{class:"mt-auto flex justify-end border-t p-5",children:n(S,{onClick$:h,get disabled(){return!t.mobile||!t.code||o.userStore.loading.update},get loading(){return o.userStore.loading.update},children:`保存手机`,[e]:{onClick$:e,disabled:a((l,f)=>!l.mobile||!l.code||f.userStore.loading.update,[t,o]),loading:a(l=>l.userStore.loading.update,[o])}},1,"lv_25"),[e]:{class:e}},1,"lv_26")],[e]:{class:e}},1,"lv_27")},w=(o,r)=>{const[s]=d();return s.code=r.value},j=Object.freeze(Object.defineProperty({__proto__:null,s_HRjqFOQPHIA:w},Symbol.toStringTag,{value:"Module"})),O=(o,r)=>{const[s]=d();return s.mobile=r.value},M=Object.freeze(Object.defineProperty({__proto__:null,s_5VK0dKaN4Zg:O},Symbol.toStringTag,{value:"Module"})),K=o=>{const[r]=d();r.area_code=o.callingCode.replace("+","")},D=Object.freeze(Object.defineProperty({__proto__:null,_hW:g,s_qCxDKclpgKg:K},Symbol.toStringTag,{value:"Module"}));export{g as _hW,w as a,O as b,K as c,W as s,C as s_IhD8n9g2G0U};
