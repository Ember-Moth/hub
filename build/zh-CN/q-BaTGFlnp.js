import{u as f,c as O,t as S,v as I,a as E,A as w,q as o,D as g,m as a,d as e,l as n,f as h,h as P,k as v,_hW as x}from"./q-Q7QTf1-t.js";import{_ as d}from"./q-BKaOGYNW.js";import{G as _,B as k,c as L,H as q}from"./q-CXrtXnGn.js";import{$ as C,z as R,n as j}from"./q-Cfw5b693.js";import{L as D}from"./q-CX_U-nEJ.js";import{F as A}from"./q-DKzjTzd0.js";import{f as y}from"./q-bWKQX6P2.js";import"./q-R_PFgutd.js";import{D as V}from"./q-xouav5_y.js";import{t as z}from"./q-B-GNphMI.js";import"./q-D3Ga_9CS.js";import"./q-C6JuRMDH.js";import"./q-DTPKyc3d.js";import"./q-DlwICHcG.js";const U=async s=>{const[t]=f();await t.fetchOrderList({page:s})},M=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_HOLw9JkJKRE:U},Symbol.toStringTag,{value:"Module"})),J={...V,params:{page:1,size:10}},T=O("user-order-store"),$=s=>{const t={...J,...s},i=S(t);return I(T,i),i},B=()=>{const s=E(T),t=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.a),[]),"s_HTJVCM44hE4",[s]),i=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.c),[]),"s_wxFRRKZGQ9E",[s]),c=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.f),[]),"s_3rEANNSs4OA",[i,t,s]),m=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.g),[]),"s_kE3wWdkBdOE",[s]),p=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.d),[]),"s_4j6Qcph6D9Y",[s]),r=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.b),[]),"s_kfI1vx9hq4k",[s]),u=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.h),[]),"s_7BbBRuS2Gfs",[s]),b=o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.e),[]),"s_0PgV7aaybNk",[s]);return w(o(()=>d(()=>import("./q-DhABquXc.js").then(l=>l.o),[]),"s_JMItxfndiQk",[i,s])),{orderStore:s,fetchOrderList:t,fetchOrderDetail:i,handleCloseOrder:c,handlePreCreateOrder:m,handlePurchase:p,handleRecharge:r,handleRenewal:u,handleResetTraffic:b}},Q=()=>{g();const s={cancelSuccess:`订单取消成功`};$();const t=B();w(o(()=>d(()=>Promise.resolve().then(()=>X),void 0),"s_j8qL06l3fO8",[t]));const i=o(()=>d(()=>Promise.resolve().then(()=>M),void 0),"s_HOLw9JkJKRE",[t]),c=o(()=>d(()=>Promise.resolve().then(()=>F),void 0),"s_TIO40PGUL0k",[s,t]),m=r=>{switch(r){case 1:return"bg-yellow-100 text-yellow-800";case 2:return"bg-blue-100 text-blue-800";case 3:case 4:return"bg-red-100 text-red-800";case 5:return"bg-green-100 text-green-800";default:return"bg-zinc-100 text-zinc-800"}},p=r=>({1:`待支付`,2:`已支付`,3:`已取消`,4:`已关闭`,5:`已完成`})[r]||`未知状态`;return a(_.Root,{children:[a(_.Header,{children:e("div",null,{class:"flex items-center gap-2"},[e("div",null,{class:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-lg"},a(C,{class:"text-primary h-4 w-4",[n]:{class:n}},3,"yS_0"),1,null),a(_.Title,{children:`我的订单`},1,"yS_1")],1,null)},1,"yS_2"),a(_.Content,{class:"p-0",children:e("div",null,null,t.orderStore.list.length>0?e("div",null,null,[e("div",null,{class:"bg-muted/50 hidden border-b text-left md:grid md:grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr]"},[e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`订单编号`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`产品名称`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`订单金额`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`订单状态`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`创建时间`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`更新时间`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-right text-sm font-medium"},`操作`,1,null)],1,null),t.orderStore.list.map((r,u)=>g(e("div",{class:`border-border ${u%2===0?"bg-background":"bg-muted/10"} flex flex-col border-b md:grid md:grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr] md:items-center ${u===0&&"md:border-t-0"} ${u!==0&&"md:border-t-0"} p-4 md:divide-none md:p-0`},null,[e("div",null,{class:"mb-3 flex w-full items-center justify-between md:hidden"},[e("div",null,{class:"text-foreground text-sm font-medium"},[`订单编号`,":"," ",h(r,"order_no")],1,null),e("span",{class:`inline-flex min-w-[4.5rem] items-center justify-center rounded-full px-3 py-1 text-xs font-medium ${m(r.status)}`},null,p(r.status),1,null)],1,null),e("div",null,{class:"text-foreground hidden px-3 py-4 text-sm font-medium break-all md:block"},h(r,"order_no"),1,null),e("div",null,{class:"grid grid-cols-2 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`产品名称`,1,null),e("div",null,{class:"text-foreground/90 text-sm md:truncate"},r.type===4?`充值`:r.subscribe.name||`未知产品`,1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`订单金额`,1,null),e("div",null,{class:"text-foreground text-sm font-medium whitespace-nowrap"},a(A,{get value(){return r.amount},type:"currency",[n]:{value:P(r,"amount"),type:n}},3,"yS_3"),1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},e("div",null,{class:"hidden md:block"},e("span",{class:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-medium whitespace-nowrap ${m(r.status)}`},null,p(r.status),1,null),1,null),1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`创建时间`,1,null),e("div",null,{class:"text-foreground/90 text-sm"},y(r.created_at),1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`更新时间`,1,null),e("div",null,{class:"text-foreground/90 text-sm"},r.updated_at?y(r.updated_at):"-",1,null)],1,null),e("div",null,{class:"mt-3 flex justify-end md:mt-0 md:px-3 md:py-4"},e("div",null,{class:"flex flex-wrap justify-end"},[r.status===1&&a(k,{size:"sm",look:"alert",class:"whitespace-nowrap",onClick$:o(()=>d(()=>Promise.resolve().then(()=>H),void 0),"s_cULIvnQEV5U",[c,r]),children:[a(R,{class:"mr-1 h-4 w-4",[n]:{class:n}},3,"yS_4"),`取消订单`],[n]:{size:n,look:n,class:n}},1,"yS_5"),a(D,{href:`/order/detail?order_no=${r.order_no}`,get class(){return L({size:"sm",class:"whitespace-nowrap"})},children:[a(j,{class:"mr-1 h-4 w-4",[n]:{class:n}},3,"yS_6"),`查看详情`],[n]:{class:n}},1,"yS_7")],1,null),1,null)],1,r.order_no)))],1,"yS_8"):e("div",null,{class:"flex h-40 items-center justify-center"},e("div",null,{class:"text-foreground/70"},`您尚无任何订单`,1,null),1,null),1,null),[n]:{class:n}},1,"yS_9"),a(_.Footer,{class:"p-5",children:t.orderStore.pagination.total>0&&a(q,{get current(){return t.orderStore.pagination.current},get pageSize(){return t.orderStore.pagination.size},get total(){return t.orderStore.pagination.total},onChange$:i,get disabled(){return t.orderStore.loading.list},[n]:{current:v(r=>r.orderStore.pagination.current,[t]),pageSize:v(r=>r.orderStore.pagination.size,[t]),total:v(r=>r.orderStore.pagination.total,[t]),onChange$:n,disabled:v(r=>r.orderStore.loading.list,[t])}},3,"yS_10"),[n]:{class:n}},1,"yS_11")]},1,"yS_12")},_e=Object.freeze(Object.defineProperty({__proto__:null,s_JXbeD0ClkEM:Q},Symbol.toStringTag,{value:"Module"})),N=async s=>{const[t,i]=f();await i.handleCloseOrder(s)&&z.success(t.cancelSuccess)},F=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_TIO40PGUL0k:N},Symbol.toStringTag,{value:"Module"})),G=()=>{const[s,t]=f();s(t.order_no)},H=Object.freeze(Object.defineProperty({__proto__:null,s_cULIvnQEV5U:G},Symbol.toStringTag,{value:"Module"})),K=()=>{const[s]=f();s.fetchOrderList()},X=Object.freeze(Object.defineProperty({__proto__:null,_hW:x,s_j8qL06l3fO8:K},Symbol.toStringTag,{value:"Module"}));export{x as _hW,_e as i,U as s_HOLw9JkJKRE,Q as s_JXbeD0ClkEM,N as s_TIO40PGUL0k,G as s_cULIvnQEV5U,K as s_j8qL06l3fO8};
