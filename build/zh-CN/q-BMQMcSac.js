import{v as Y,o as R,q as b,k as Z,m as w,b as U,n as x,u as I,_ as S}from"./q-gSxxJeWo.js";import{_ as m}from"./q-BKaOGYNW.js";var J=Object.defineProperty,K=(t,e,i)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,z=(t,e,i)=>K(t,typeof e!="symbol"?e+"":e,i);class je extends Error{constructor(e,i){super(typeof e=="string"?e:""),z(this,"name","FormError"),z(this,"errors"),this.errors=typeof e=="string"?i||{}:e}}function ee(t,e,i){const{checked:n,files:r,options:s,value:l,valueAsDate:a,valueAsNumber:c}=t;return!i||i==="string"?l:i==="string[]"?s?[...s].filter(o=>o.selected&&!o.disabled).map(o=>o.value):n?[...e.value||[],l]:(e.value||[]).filter(o=>o!==l):i==="number"?c:i==="boolean"?n:i==="File"&&r?x(r[0]):i==="File[]"&&r?[...r].map(o=>x(o)):i==="Date"&&a?a:e.value}function P(t){return[...Object.values(t.internal.fields),...Object.values(t.internal.fieldArrays)]}function A(t,e){return t.internal.fieldArrays[e]}function te(t,e){return+e.replace(`${t}.`,"").split(".")[0]}function $(t,e){q(t,!1).forEach(i=>{const n=A(t,i).items.length-1;e.filter(r=>r.startsWith(`${i}.`)&&te(i,r)>n).forEach(r=>{e.splice(e.indexOf(r),1)})})}function q(t,e=!0){const i=Object.keys(t.internal.fieldArrays);return e&&$(t,i),i}function ie(t,e=!0){const i=Object.keys(t.internal.fields);return e&&$(t,i),i}function p(t,e){return t.internal.fields[e]}function j(t,e,i){const n=ie(t,i),r=q(t,i);return typeof e=="string"||Array.isArray(e)?(typeof e=="string"?[e]:e).reduce((s,l)=>{const[a,c]=s;return r.includes(l)?(r.forEach(o=>{o.startsWith(l)&&c.add(o)}),n.forEach(o=>{o.startsWith(l)&&a.add(o)})):a.add(l),s},[new Set,new Set]).map(s=>[...s]):[n,r]}function ne(t,{items:e,initialItems:i,error:n}={items:[],initialItems:[],error:""}){const r=i.join()!==e.join();return{internal:{initialItems:[...i],startItems:[...i],validate:[],validateOn:void 0,revalidateOn:void 0,consumers:[]},name:t,items:e,error:n,active:!1,touched:r,dirty:r}}function B(t,e){const i=n=>n instanceof Blob?n.size:n;return Array.isArray(t)&&Array.isArray(e)?t.map(i).join()!==e.map(i).join():t instanceof Date&&e instanceof Date?t.getTime()!==e.getTime():Number.isNaN(t)&&Number.isNaN(e)?!1:t!==e}function M(t,{value:e,initialValue:i,error:n}={value:void 0,initialValue:void 0,error:""}){const r=B(i,e);return{internal:{initialValue:i,startValue:i,validate:[],validateOn:void 0,revalidateOn:void 0,transform:[],elements:[],consumers:[]},name:t,value:e,error:n,active:!1,touched:r,dirty:r}}function O(t,e){return t.split(".").reduce((i,n)=>i==null?void 0:i[n],e)}let re=0;function T(){return re++}function se({loader:t,action:e,fieldArrays:i}){function n(a){var c;return((c=e==null?void 0:e.value)==null?void 0:c.values)&&O(a,e.value.values)}const r=()=>T(),s=a=>{var c;return((c=e==null?void 0:e.value)==null?void 0:c.errors[a])||""},l=(a,c,o)=>Object.entries(c).reduce((_,[f,u])=>{var y;const d=o?`${o}.${f}`:f;if(i!=null&&i.includes(d.replace(/.\d+./g,".$."))){const h=u.map(r);_[1][d]=ne(d,{initialItems:h,items:((y=n(d))==null?void 0:y.map(r))||[...h],error:s(d)})}else(!u||typeof u!="object"||Array.isArray(u)||u instanceof Date)&&(_[0][d]=M(d,{initialValue:u,value:n(d)??u,error:s(d)}));return u&&typeof u=="object"&&l(_,u,d),_},a);return l([{},{}],t.value)}async function Te(t,e){const i=await t.resolve();return(typeof i=="function"?i():i).safeParseAsync(e)}function L(t,e){return(typeof t!="string"&&!Array.isArray(t)?t:e)||{}}function ae(t,e){t.dirty=e||P(t).some(i=>i.active&&i.dirty)}function C(t,e){const i=B(e.internal.startValue,e.value);i!==e.dirty&&(e.dirty=i,ae(t,i))}function G(t,e){var i,n;(n=(i=p(t,e))==null?void 0:i.internal.elements[0])==null||n.focus()}function oe(t,e,i,{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldFocus:l=!!i}={}){for(const a of[p(t,e),A(t,e)])a&&(!n||a.active)&&(!r||a.touched)&&(!s||a.dirty)&&(a.error=i,i&&"value"in a&&l&&G(t,e));H(t,!!i)}function le(t,e,i){const{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldValid:l=!1}=L(e,i);return j(t,e)[0].reduce((a,c)=>{const o=p(t,c);return(!n||o.active)&&(!r||o.touched)&&(!s||o.dirty)&&(!l||!o.error)&&(typeof e=="string"?c.replace(`${e}.`,""):c).split(".").reduce((_,f,u,d)=>_[f]=u===d.length-1?o.value:typeof _[f]=="object"&&_[f]||(isNaN(+d[u+1])?{}:[]),a),a},typeof e=="string"?[]:{})}function Le(t,e,i){const[n,r]=j(t,e,!1),s=typeof e=="string"&&n.length===1,l=!s&&!Array.isArray(e),a=L(e,i),{initialValue:c,initialValues:o,keepResponse:_=!1,keepSubmitCount:f=!1,keepSubmitted:u=!1,keepValues:d=!1,keepDirtyValues:y=!1,keepItems:h=!1,keepDirtyItems:X=!1,keepErrors:N=!1,keepTouched:k=!1,keepDirty:V=!1}=a;n.forEach(E=>{const v=p(t,E);(s?"initialValue"in a:o)&&(v.internal.initialValue=s?c:O(E,o));const F=y&&v.dirty;!d&&!F&&(v.internal.startValue=v.internal.initialValue,v.value=v.internal.initialValue,v.internal.elements.forEach(g=>{g.type==="file"&&(g.value="")})),k||(v.touched=!1),!V&&!d&&!F&&(v.dirty=!1),N||(v.error="")}),r.forEach(E=>{var g;const v=A(t,E),F=X&&v.dirty;!h&&!F&&(o&&(v.internal.initialItems=((g=O(E,o))==null?void 0:g.map(()=>T()))||[]),v.internal.startItems=[...v.internal.initialItems],v.items=[...v.internal.initialItems]),k||(v.touched=!1),!V&&!h&&!F&&(v.dirty=!1),N||(v.error="")}),l&&(_||(t.response={}),f||(t.submitCount=0),u||(t.submitted=!1)),ve(t)}function ue(t,e,{duration:i}={}){t.response=e,i&&setTimeout(()=>{t.response===e&&(t.response={})},i)}function De(t,e,i,{shouldTouched:n=!0,shouldDirty:r=!0,shouldValidate:s=!0,shouldFocus:l=!0}={}){const a=de(t,e);a.value=i,n&&(a.touched=!0,t.touched=!0),r&&C(t,a),s&&Q(t,a,e,{on:["touched","input"],shouldFocus:l})}async function ce(t,e,i){const[n,r]=j(t,e),{shouldActive:s=!0,shouldFocus:l=!0}=L(e,i),a=T();t.internal.validators.push(a),t.validating=!0;const c=t.internal.validate?await t.internal.validate(le(t,{shouldActive:s})):{};let o=typeof e!="string"&&!Array.isArray(e)?!Object.keys(c).length:!0;const[_]=await Promise.all([Promise.all(n.map(async f=>{const u=p(t,f);if(!s||u.active){let d;for(const h of u.internal.validate)if(d=await h(u.value),d)break;const y=d||c[f]||"";return y&&(o=!1),u.error=y,y?f:null}})),Promise.all(r.map(async f=>{const u=A(t,f);if(!s||u.active){let d="";for(const h of u.internal.validate)if(d=await h(u.items),d)break;const y=d||c[f]||"";y&&(o=!1),u.error=y}}))]);if(fe(t,c,{shouldActive:s}),l){const f=_.find(u=>u);f&&G(t,f)}return H(t,!o),t.internal.validators.splice(t.internal.validators.indexOf(a),1),t.internal.validators.length||(t.validating=!1),o}function Ne(t){var e;(e=t.element)==null||e.requestSubmit()}function Q(t,e,i,{on:n,shouldFocus:r=!1}){const s=e.internal.validateOn??t.internal.validateOn,l=e.internal.revalidateOn??t.internal.revalidateOn;n.includes((s==="submit"?t.submitted:e.error)?l:s)&&ce(t,i,{shouldFocus:r})}async function D(t,e,i,n,r,s,l){l!==void 0&&(e.value=l);for(const a of e.internal.transform)e.value=await a(e.value,n,r);e.touched=!0,t.touched=!0,C(t,e),Q(t,e,i,{on:s})}function de(t,e){return p(t,e)||(t.internal.fields[e]=M(e)),p(t,e)}function fe(t,e,{duration:i,shouldActive:n=!0}){const r=Object.entries(e).reduce((s,[l,a])=>([p(t,l),A(t,l)].every(c=>!c||n&&!c.active)&&s.push(a),s),[]).join(" ");r&&ue(t,{status:"error",message:r},{duration:i})}function ke(t,e,i){Object.entries(e).forEach(([n,r])=>{r&&oe(t,n,r,{...i,shouldFocus:!1})})}function H(t,e){t.invalid=e||P(t).some(i=>i.active&&i.error)}function ve(t){let e=!1,i=!1,n=!1;for(const r of P(t))if(r.active&&(r.touched&&(e=!0),r.dirty&&(i=!0),r.error&&(n=!0)),e&&i&&n)break;t.touched=e,t.dirty=i,t.invalid=n}function W(t,e,i){return U(b(()=>m(()=>import("./q-CfQF4GL7.js").then(n=>n.i),[]),"s_IPZVOCaf9gs"))(t,e,i)}function _e({children:t,name:e,type:i,...n}){const{of:r}=n,s=p(r,e);return R(W,{store:s,...n,children:t(s,{name:e,autoFocus:!1,ref:b(()=>m(()=>Promise.resolve().then(()=>ge),void 0),"s_d39nGntXH2Y",[s]),onInput$:b(()=>m(()=>Promise.resolve().then(()=>Se),void 0),"s_09LSBTQzILI",[s,r,e,i]),onChange$:b(()=>m(()=>Promise.resolve().then(()=>Ee),void 0),"s_vEPATfLfSy4",[s,r,e]),onBlur$:b(()=>m(()=>Promise.resolve().then(()=>me),void 0),"s_hh4M9eoGnBE",[s,r,e])})},0,e)}function ye({children:t,name:e,...i}){const n=A(i.of,e);return R(W,{store:n,...i,children:t(n)},0,e)}function he({of:t,action:e,onSubmit$:i,responseDuration:n,keepResponse:r,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:c,reloadDocument:o,children:_,...f}){const{encType:u}=f,d={duration:n,shouldActive:s,shouldTouched:l,shouldDirty:a,shouldFocus:c};return Z("form",{noValidate:!0,...f,method:"post",action:e==null?void 0:e.actionPath,"preventdefault:submit":!o,ref:y=>{t.element=y},children:_,onSubmit$:b(()=>m(()=>import("./q-VTgzNf9N.js"),[]),"s_9oZQOoepHvI",[e,u,t,r,i,d,o])},{noValidate:w,method:w},0,"l5_1")}function pe({validate:t,validateOn:e="submit",revalidateOn:i="input",...n}){return Y(()=>{var l,a;const[r,s]=se(n);return{internal:{fields:r,fieldArrays:s,fieldArrayPaths:n.fieldArrays,validate:t,validators:[],validateOn:e,revalidateOn:i},element:void 0,submitCount:0,submitting:!1,submitted:!1,validating:!1,touched:!1,dirty:!1,invalid:!1,response:((a=(l=n.action)==null?void 0:l.value)==null?void 0:a.response)||{}}})}function Ve(t){const e=pe(t);return[e,{Form:i=>he({of:e,action:t.action,...i}),Field:i=>_e({of:e,...i}),FieldArray:i=>ye({of:e,...i})}]}const be=(t,e)=>{const[i,n,r]=I();D(n,i,r,t,e,["touched","blur"])},me=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_hh4M9eoGnBE:be},Symbol.toStringTag,{value:"Module"})),Ae=(t,e)=>{const[i,n,r]=I();D(n,i,r,t,e,["change"])},Ee=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_vEPATfLfSy4:Ae},Symbol.toStringTag,{value:"Module"})),Fe=t=>{const[e]=I();e.internal.elements.push(t)},ge=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_d39nGntXH2Y:Fe},Symbol.toStringTag,{value:"Module"})),Ie=(t,e)=>{const[i,n,r,s]=I();D(n,i,r,t,e,["touched","input"],ee(e,i,s))},Se=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_09LSBTQzILI:Ie},Symbol.toStringTag,{value:"Module"}));export{je as F,S as _hW,ue as a,fe as b,T as c,Te as d,Ve as e,De as f,le as g,Ne as h,Ae as i,Fe as j,Ie as k,Le as r,ke as s,be as s_hh4M9eoGnBE,ve as u,ce as v};
