import{u,q as l,a as E,p as x,J as k,s as D,B as O,k as T,l as v,m as b,_ as c}from"./q-gSxxJeWo.js";import{_ as s}from"./q-BKaOGYNW.js";import{c as w,u as j}from"./q-DZzWbOQ9.js";const L=()=>{const[i,t]=u();return(i==null?void 0:i.value)??t.value??""},R=Object.freeze(Object.defineProperty({__proto__:null,s_x0BkzOir6QM:L},Symbol.toStringTag,{value:"Module"})),B=async i=>{const[t]=u();if(t.mode==="inline"||t.isListboxOpenSig.value){const e=t.highlightedIndexSig.value??-1;t.highlightedIndexSig.value=await i(e)}else t.isListboxOpenSig.value=!0},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_bB0CYZUGkDI:B},Symbol.toStringTag,{value:"Module"})),U=async i=>{const[t,e,n,o]=u();if(!e.itemsMapSig.value)return;e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(o.value=e.inputValueSig.value.length===0);const r=l(()=>s(()=>Promise.resolve().then(()=>C),void 0),"s_bB0CYZUGkDI",[e]);switch(i.key){case"ArrowDown":await r(t.getNextEnabledItemIndex$);break;case"ArrowUp":await r(t.getPrevEnabledItemIndex$);break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const d=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=d}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value&&e.mode!=="inline"||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))return;if(!e.multiple){if(e.mode==="inline")return;e.isListboxOpenSig.value=!1;return}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",n.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}},q=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_BSbCR05jMTc:U},Symbol.toStringTag,{value:"Module"})),z=function(){const[t,e]=u(),{selectedValuesSig:n,multiple:o,itemsMapSig:r,highlightedIndexSig:d}=t,_=n.value,g=[];for(const[m,p]of r.value.entries())if((o?Array.isArray(_)&&_.includes(p.value):p.value===_)&&(g.push(p.displayValue),d.value=m,!o))break;e.value=o?g:g[0]||""},N=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_rOsU60ohN18:z},Symbol.toStringTag,{value:"Module"})),H=function(){const[t]=u();t.mode==="inline"&&(t.highlightedIndexSig.value=0)},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_P84l9BDaqIA:H},Symbol.toStringTag,{value:"Module"})),Z=i=>{const[t,e,n]=u();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((n.value||e.value)&&t.inputValueSig.value.length===0){const o=[...t.selectedValuesSig.value];o.pop(),t.selectedValuesSig.value=o}}},Q=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_Odi8LAZN0ok:Z},Symbol.toStringTag,{value:"Module"})),Y=()=>{const[i]=u();if(!i.isListboxOpenSig.value&&i.mode==="popover")return"";const t=i.highlightedIndexSig.value;if(t===null||t===-1)return"";const e=i.itemsMapSig.value.get(t);return!e||e.disabled?"":`${i.localId}-${t}`},J=Object.freeze(Object.defineProperty({__proto__:null,s_eak4JP4vopM:Y},Symbol.toStringTag,{value:"Module"}));class ne{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(n=>n!==t):[...e,t]}return this.initialValue===t?"":t}}function G(){const i=E(w);return{getNextEnabledItemIndex$:l(()=>s(()=>import("./q-BQH8TGke.js").then(r=>r.u),[]),"s_YUEhdQ10vgw",[i]),getPrevEnabledItemIndex$:l(()=>s(()=>import("./q-Dtoc1dah.js"),[]),"s_vbX1JOQ99lY",[i]),selectionManager$:l(()=>s(()=>import("./q-rnGazqWr.js"),[]),"s_qfnNgkaxccI",[i]),filterManager$:l(()=>s(()=>import("./q-Bs3OznD5.js"),[]),"s_bz116YTv9K0",[i])}}const oe=({"bind:value":i,...t})=>{const e=E(w),n={context:e,givenContextRef:e.inputRef},o=j(t.ref,n),r=`${e.localId}-panel`,d=`${e.localId}-inline`,_=`${e.localId}-input`,g=`${e.localId}-label`,m=`${e.localId}-description`,p=`${e.localId}-error-message`,I=x(),f=x(!1),h=x(!1),P=G(),S=k(l(()=>s(()=>Promise.resolve().then(()=>J),void 0),"s_eak4JP4vopM",[e])),A=D(a=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(a.key)&&a.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),V=l(()=>s(()=>Promise.resolve().then(()=>q),void 0),"s_BSbCR05jMTc",[P,e,h,f]),M=l(()=>s(()=>Promise.resolve().then(()=>F),void 0),"s_wZ2h0er7sbk",[e,i,h]),$=l(()=>s(()=>Promise.resolve().then(()=>Q),void 0),"s_Odi8LAZN0ok",[e,h,f]);O(l(()=>s(()=>Promise.resolve().then(()=>K),void 0),"s_P84l9BDaqIA",[e])),O(l(()=>s(()=>Promise.resolve().then(()=>N),void 0),"s_rOsU60ohN18",[e,I]));const y=k(l(()=>s(()=>Promise.resolve().then(()=>R),void 0),"s_x0BkzOir6QM",[i,I]));return T("input",{role:"combobox",get value(){return y.value},id:_,get"aria-activedescendant"(){return S.value},get"aria-expanded"(){return e.isExpandedSig.value},"aria-controls":e.mode==="inline"?d:r,"aria-labelledby":g,"aria-describedby":`${m} 
        ${p}`,"aria-autocomplete":"list",get"aria-haspopup"(){return e.mode==="inline"?void 0:"listbox"},ref:o,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[A,V,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?$:void 0,t.onKeyUp$],onInput$:[M,t.onInput$]},{role:b,value:v(a=>a.value,[y]),"aria-activedescendant":v(a=>a.value,[S]),"aria-expanded":v(a=>a.isExpandedSig.value,[e]),"aria-autocomplete":b,"aria-haspopup":v(a=>a.mode==="inline"?void 0:"listbox",[e]),autocomplete:b,"data-combobox-input":b,"data-invalid":v(a=>a.isInvalidSig.value?"":void 0,[e])},0,"In_0")},W=async(i,t)=>{const[e,n,o]=u(),r=i.target;e.inputValueSig.value=r.value,o.value=!1,r.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,n&&(n.value=t.value,e.inputValueSig.value=t.value),e.mode!=="inline"&&(e.highlightedIndexSig.value=null)},F=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_wZ2h0er7sbk:W},Symbol.toStringTag,{value:"Module"}));export{ne as V,U as a,z as b,H as c,Z as d,Y as e,oe as f,W as g,B as s,L as s_x0BkzOir6QM,G as u};
