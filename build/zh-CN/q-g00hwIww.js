import{u as i,o as m,s as c,q as r,d as p,_hW as _}from"./q-Q7QTf1-t.js";import{r as s}from"./q-CXrtXnGn.js";import{_ as l}from"./q-BKaOGYNW.js";import"./q-R_PFgutd.js";import"./q-D3Ga_9CS.js";import"./q-Cfw5b693.js";import"./q-CX_U-nEJ.js";import"./q-C6JuRMDH.js";import"./q-B-GNphMI.js";import"./q-DTPKyc3d.js";import"./q-bWKQX6P2.js";async function Z(e){return s("/v1/common/client",{method:"GET"})}async function u(e,o){return s("/v1/common/send_code",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function y(e,o){return s("/v1/common/send_sms_code",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function k(e){return s("/v1/common/site/config",{method:"GET",...e||{}})}async function D(e){return s("/v1/common/site/privacy",{method:"GET"})}async function F(e){return s("/v1/common/site/tos",{method:"GET"})}const v=({track:e})=>{const[o,t]=i();if(e(()=>o.value),o.value<=0)return;const n=setTimeout(()=>{o.value--,o.value<=0&&localStorage.removeItem(t)},1e3);return()=>clearTimeout(n)},g=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_lpReTsJRMyA:v},Symbol.toStringTag,{value:"Module"})),f=async()=>{const[e,o,t]=i();await o(),e.value=60;const n=Date.now()+e.value*1e3;localStorage.setItem(t,n.toString())},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_jt8m0XZPEVM:f},Symbol.toStringTag,{value:"Module"})),S=async()=>{const[e]=i();e.type==="email"&&e.params.email?await u({email:e.params.email,type:e.params.type}):e.type==="mobile"&&e.params.telephone&&e.params.telephone_area_code&&await y({telephone:e.params.telephone,telephone_area_code:e.params.telephone_area_code,type:e.params.type})},b=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_ZTAL2160ZFs:S},Symbol.toStringTag,{value:"Module"})),h=()=>{const[e,o]=i(),t=localStorage.getItem(o);if(t){const n=parseInt(t),a=Math.floor((n-Date.now())/1e3);a>0?e.value=a:localStorage.removeItem(o)}},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_6ooJFlUuMLg:h},Symbol.toStringTag,{value:"Module"})),P=e=>{const o=m(0),t=`verify_code_${e.type}`;c(r(()=>l(()=>Promise.resolve().then(()=>C),void 0),"s_6ooJFlUuMLg",[o,t])),c(r(()=>l(()=>Promise.resolve().then(()=>g),void 0),"s_lpReTsJRMyA",[o,t]));const a=r(()=>l(()=>Promise.resolve().then(()=>T),void 0),"s_jt8m0XZPEVM",[o,r(()=>l(()=>Promise.resolve().then(()=>b),void 0),"s_ZTAL2160ZFs",[e]),t]),d=o.value>0||(e.type==="email"?!e.params.email:!e.params.telephone||!e.params.telephone_area_code);return p("button",{disabled:d},{type:"button",class:"text-primary flex h-full cursor-pointer items-center px-3 text-sm whitespace-nowrap disabled:text-gray-400",onClick$:a},o.value>0?`${o.value}s`:`获取验证码`,1,"0w_0")},G=Object.freeze(Object.defineProperty({__proto__:null,s_kaWKx8yxWf4:P},Symbol.toStringTag,{value:"Module"}));export{_ as _hW,F as a,k as b,Z as c,D as g,G as s,h as s_6ooJFlUuMLg,S as s_ZTAL2160ZFs,f as s_jt8m0XZPEVM,P as s_kaWKx8yxWf4,v as s_lpReTsJRMyA};
