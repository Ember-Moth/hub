import{u as c,_ as d}from"./q-gSxxJeWo.js";import{r as s}from"./q-BG3_QTyM.js";import"./q-BKaOGYNW.js";import"./q-DuNBRwv3.js";import"./q-B5TFmh5c.js";import"./q-CvYgVdLJ.js";import"./q-C_B9_CLk.js";import"./q-C2B8HMMM.js";import"./q-CRLhHez8.js";import"./q-DXZy683x.js";import"./q-Am9eSDJS.js";async function l(e,t){return s("/v1/public/portal/order/checkout",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function u(e,t){return s("/v1/public/portal/order/status",{method:"GET",params:{...e}})}async function N(e){return s("/v1/public/portal/payment-method",{method:"GET"})}async function p(e,t){return s("/v1/public/portal/pre",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function f(e,t){return s("/v1/public/portal/purchase",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function k(e){return s("/v1/public/portal/subscribe",{method:"GET"})}const h=async e=>{const[t]=c();if(t.loading.update)return null;t.loading.update=!0;try{const r=await p(e);return r.data.data&&(t.meta.pre=r.data.data),r}catch{return null}finally{t.loading.update=!1}},I=Object.freeze(Object.defineProperty({__proto__:null,_hW:d,s_RxWHqVzDrEU:h},Symbol.toStringTag,{value:"Module"}));async function D(e,t){return s("/v1/public/order/close",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function y(e,t){return s("/v1/public/order/detail",{method:"GET",params:{...e}})}async function G(e,t){return s("/v1/public/order/list",{method:"GET",params:{...e}})}async function R(e,t){return s("/v1/public/order/pre",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function m(e,t){return s("/v1/public/order/purchase",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function _(e,t){return s("/v1/public/order/recharge",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function g(e,t){return s("/v1/public/order/renewal",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}async function T(e,t){return s("/v1/public/order/reset",{method:"POST",headers:{"Content-Type":"application/json"},data:e})}const U=async e=>{var n;const[t,r,a]=c();if(a.loading.create)return null;a.loading.create=!0;try{const o=await T(e),i=(n=o.data.data)==null?void 0:n.order_no;return i&&(a.selected={order_no:i},t(`${r}/?order_no=${i}`)),o}catch{return null}finally{a.loading.create=!1}},x=async e=>{var n;const[t,r,a]=c();if(a.loading.create)return null;a.loading.create=!0;try{const o=e.identifier?await f(e):await m({subscribe_id:e.subscribe_id,quantity:e.quantity,payment:e.payment,coupon:e.coupon||""}),i=(n=o.data.data)==null?void 0:n.order_no;return i&&(a.selected={order_no:i},e.identifier&&sessionStorage.setItem(i,JSON.stringify({identifier:e.identifier,auth_type:e.auth_type})),t(`${r}/?order_no=${i}`)),o}catch{return null}finally{a.loading.create=!1}},H=async e=>{var n;const[t,r,a]=c();if(a.loading.create)return null;a.loading.create=!0;try{const o=await g(e),i=(n=o.data.data)==null?void 0:n.order_no;return i&&(a.selected={order_no:i},t(`${r}/?order_no=${i}`)),o}catch{return null}finally{a.loading.create=!1}},W=async e=>{const[t]=c();if(t.loading.list)return;t.loading.detail=!0;const r={order_no:e},a=sessionStorage.getItem(e);if(a){const{identifier:n,auth_type:o}=JSON.parse(a);r.identifier=n,r.auth_type=o}try{const n=r.identifier?await u({order_no:e,identifier:r.identifier,auth_type:r.auth_type||"email"}):await y({order_no:e});return n.data.data&&(t.detail=n.data.data),n}catch{t.detail=null}finally{t.loading.detail=!1}},z=async e=>{var n;const[t,r,a]=c();if(a.loading.create)return null;a.loading.create=!0;try{const o=await _(e),i=(n=o.data.data)==null?void 0:n.order_no;return i&&(a.selected={order_no:i},t(`${r}/?order_no=${i}`)),o}catch{return null}finally{a.loading.create=!1}},J=async e=>{const[t]=c();if(t.loading.create)return null;t.loading.create=!0;try{const r=await l({orderNo:e,returnUrl:location.href});return r.data.data&&(r.data.data.type==="url"&&r.data.data.checkout_url&&window.open(r.data.data.checkout_url,"_blank"),t.meta.checkout=r.data.data),r}catch{return null}finally{t.loading.create=!1}};export{d as _hW,k as a,y as b,T as c,D as d,R as e,g as f,N as g,x as h,H as i,W as j,z as k,J as l,I as o,m as p,G as q,_ as r,U as s,h as s_RxWHqVzDrEU};
