import{_ as a}from"./q-BKaOGYNW.js";import{D as g,o as x,m as o,l as e,q as b,d as r,k as v,u as _,_hW as y}from"./q-Q7QTf1-t.js";import{R as u,c as T,B as w}from"./q-CXrtXnGn.js";import{a9 as I}from"./q-Cfw5b693.js";import{F as M}from"./q-DKzjTzd0.js";import"./q-R_PFgutd.js";import{u as k}from"./q-D2_mtX5_.js";import{u as C}from"./q-DlwICHcG.js";import{t as m}from"./q-B-GNphMI.js";import"./q-D3Ga_9CS.js";import"./q-CX_U-nEJ.js";import"./q-C6JuRMDH.js";import"./q-DTPKyc3d.js";import"./q-bWKQX6P2.js";import"./q-xouav5_y.js";const K=()=>{var p,f,h;g();const s=k(),t=C(),n=x(!1),l=((p=s.subscribeStore.selected)==null?void 0:p.id)||0,c=((h=(f=s.subscribeStore.selected)==null?void 0:f.subscribe)==null?void 0:h.allow_deduction)||!1,i={notAllowed:`此订阅无法取消`,unsubSuccess:`订阅成功取消`,unsubFailed:`取消订阅失败`},S=b(()=>a(()=>Promise.resolve().then(()=>O),void 0),"s_s0v0x8k3fhk",[c,l,i,n,s]);return c?o(u.Root,{"bind:show":n,onShow$:b(()=>a(()=>Promise.resolve().then(()=>E),void 0),"s_epQtZqIS6vs",[n]),onClose$:b(()=>a(()=>Promise.resolve().then(()=>D),void 0),"s_OuDnnnmikM4",[n]),closeOnBackdropClick:!0,children:[o(u.Trigger,{class:"hover:border-alert hover:bg-secondary/80 flex h-full w-full cursor-pointer flex-col justify-center rounded-md border p-3 text-center",onClick$:S,children:[r("div",null,{class:"bg-alert/20 mx-auto mb-2 flex h-10 w-10 items-center justify-center rounded-md text-red-400"},o(I,{class:"h-5 w-5",[e]:{class:e}},3,"M0_12"),1,null),r("h5",null,{class:"text-card-foreground text-sm font-medium"},`取消订阅`,1,null)],[e]:{class:e,onClick$:e}},1,"M0_13"),o(u.Panel,{class:"max-w-md",children:[o(u.Title,{children:`取消订阅`},1,"M0_14"),o(u.Description,{children:`您确定要取消此订阅吗？`},1,"M0_15"),r("div",null,{class:"mt-4"},s.subscribeStore.meta.unsubscribe&&r("div",null,{class:"rounded-md border p-4"},[`您将收到退款`,":"," ",r("span",null,{class:"text-primary font-medium"},o(M,{get value(){return s.subscribeStore.meta.unsubscribe.deduction_amount},type:"currency",[e]:{value:v(d=>d.subscribeStore.meta.unsubscribe.deduction_amount,[s]),type:e}},3,"M0_16"),1,null),r("p",null,{class:"text-alert text-sm"},`注意：取消订阅后无法恢复，请谨慎操作。`,1,null)],1,"M0_17"),1,null),r("footer",null,{class:"flex justify-end space-x-3 pt-2"},[o(u.Close,{get class(){return T({look:"outline",size:"sm"})},children:`取消`,[e]:{class:e}},1,"M0_18"),o(w,{look:"alert",size:"sm",get loading(){return s.subscribeStore.loading.update},onClick$:b(()=>a(()=>Promise.resolve().then(()=>j),void 0),"s_6mL0qCuZto8",[l,i,n,s,t]),children:`确认取消`,[e]:{look:e,size:e,loading:v(d=>d.subscribeStore.loading.update,[s])}},1,"M0_19")],1,null)],[e]:{class:e}},1,"M0_20")],[e]:{"bind:show":e,onShow$:e,onClose$:e,closeOnBackdropClick:e}},1,"M0_21"):null},q=async()=>{const[s,t,n,l,c]=_();if(!s)return m.error(n.notAllowed);await c.handlePreUnsubscribe(t),l.value=!0},O=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_s0v0x8k3fhk:q},Symbol.toStringTag,{value:"Module"})),P=async()=>{const[s,t,n,l,c]=_(),i=await l.handleUnsubscribe(s);n.value=!1,i?(m.success(t.unsubSuccess),c.fetchUserInfo()):m.error(t.unsubFailed)},j=Object.freeze(Object.defineProperty({__proto__:null,s_6mL0qCuZto8:P},Symbol.toStringTag,{value:"Module"})),A=()=>{const[s]=_();s.value=!1,document.body.style.overflow="auto"},D=Object.freeze(Object.defineProperty({__proto__:null,s_OuDnnnmikM4:A},Symbol.toStringTag,{value:"Module"})),L=()=>{const[s]=_();s.value=!0},E=Object.freeze(Object.defineProperty({__proto__:null,s_epQtZqIS6vs:L},Symbol.toStringTag,{value:"Module"}));export{y as _hW,P as s_6mL0qCuZto8,A as s_OuDnnnmikM4,K as s_dGRHfYzA0hQ,L as s_epQtZqIS6vs,q as s_s0v0x8k3fhk};
