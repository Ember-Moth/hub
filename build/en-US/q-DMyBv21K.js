import{u as p,c as b,v as I,x as S,a as E,B as h,q as l,E as x,o as d,e,m as n,g,i as P,l as v,_ as f}from"./q-gSxxJeWo.js";import{_ as o}from"./q-BKaOGYNW.js";import{G as u,B as L,c as k,H as q}from"./q-BG3_QTyM.js";import{$ as R,z as C,n as j}from"./q-B5TFmh5c.js";import{L as D}from"./q-C_B9_CLk.js";import{F as A}from"./q-X_lghi-t.js";import{f as y}from"./q-Am9eSDJS.js";import"./q-CvYgVdLJ.js";import{D as V}from"./q-C0whS16-.js";import{t as U}from"./q-CRLhHez8.js";import"./q-DuNBRwv3.js";import"./q-C2B8HMMM.js";import"./q-DXZy683x.js";import"./q-CTSOZNae.js";const z=async s=>{const[t]=p();await t.fetchOrderList({page:s})},M=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_HOLw9JkJKRE:z},Symbol.toStringTag,{value:"Module"})),$={...V,params:{page:1,size:10}},w=b("user-order-store"),B=s=>{const t={...$,...s},a=I(t);return S(w,a),a},J=()=>{const s=E(w),t=l(()=>o(()=>import("./q-DTtewCBA.js"),[]),"s_HTJVCM44hE4",[s]),a=l(()=>o(()=>import("./q-C8C5esoL.js"),[]),"s_wxFRRKZGQ9E",[s]),_=l(()=>o(()=>import("./q-D8drG1eX.js"),[]),"s_3rEANNSs4OA",[a,t,s]),c=l(()=>o(()=>import("./q-CkAPtYRP.js"),[]),"s_kE3wWdkBdOE",[s]),m=l(()=>o(()=>import("./q-BY-B2L1h.js"),[]),"s_4j6Qcph6D9Y",[s]),r=l(()=>o(()=>import("./q-BalUFUzI.js"),[]),"s_kfI1vx9hq4k",[s]),i=l(()=>o(()=>import("./q-Bb2vwKak.js"),[]),"s_7BbBRuS2Gfs",[s]),T=l(()=>o(()=>import("./q-C95LWMlB.js"),[]),"s_0PgV7aaybNk",[s]);return h(l(()=>o(()=>import("./q-horE1oYH.js").then(O=>O.o),[]),"s_JMItxfndiQk",[a,s])),{orderStore:s,fetchOrderList:t,fetchOrderDetail:a,handleCloseOrder:_,handlePreCreateOrder:c,handlePurchase:m,handleRecharge:r,handleRenewal:i,handleResetTraffic:T}},ue=()=>{x();const s={cancelSuccess:`Order successfully cancelled`};B();const t=J();h(l(()=>o(()=>Promise.resolve().then(()=>K),void 0),"s_j8qL06l3fO8",[t]));const a=l(()=>o(()=>Promise.resolve().then(()=>M),void 0),"s_HOLw9JkJKRE",[t]),_=l(()=>o(()=>Promise.resolve().then(()=>N),void 0),"s_TIO40PGUL0k",[s,t]),c=r=>{switch(r){case 1:return"bg-yellow-100 text-yellow-800";case 2:return"bg-blue-100 text-blue-800";case 3:case 4:return"bg-red-100 text-red-800";case 5:return"bg-green-100 text-green-800";default:return"bg-zinc-100 text-zinc-800"}},m=r=>({1:`Pending Payment`,2:`Paid`,3:`Cancelled`,4:`Closed`,5:`Completed`})[r]||`Unknown Status`;return d(u.Root,{children:[d(u.Header,{children:e("div",null,{class:"flex items-center gap-2"},[e("div",null,{class:"bg-primary/10 flex h-8 w-8 items-center justify-center rounded-lg"},d(R,{class:"text-primary h-4 w-4",[n]:{class:n}},3,"yS_0"),1,null),d(u.Title,{children:`My Orders`},1,"yS_1")],1,null)},1,"yS_2"),d(u.Content,{class:"p-0",children:e("div",null,null,t.orderStore.list.length>0?e("div",null,null,[e("div",null,{class:"bg-muted/50 hidden border-b text-left md:grid md:grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr]"},[e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Order Number`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Product Name`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Order Amount`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Order Status`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Created Time`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-sm font-medium"},`Updated Time`,1,null),e("div",null,{class:"text-muted-foreground px-3 py-4 text-right text-sm font-medium"},`Actions`,1,null)],1,null),t.orderStore.list.map((r,i)=>x(e("div",{class:`border-border ${i%2===0?"bg-background":"bg-muted/10"} flex flex-col border-b md:grid md:grid-cols-[2fr_1fr_1fr_1fr_1fr_1fr_1fr] md:items-center ${i===0&&"md:border-t-0"} ${i!==0&&"md:border-t-0"} p-4 md:divide-none md:p-0`},null,[e("div",null,{class:"mb-3 flex w-full items-center justify-between md:hidden"},[e("div",null,{class:"text-foreground text-sm font-medium"},[`Order Number`,":"," ",g(r,"order_no")],1,null),e("span",{class:`inline-flex min-w-[4.5rem] items-center justify-center rounded-full px-3 py-1 text-xs font-medium ${c(r.status)}`},null,m(r.status),1,null)],1,null),e("div",null,{class:"text-foreground hidden px-3 py-4 text-sm font-medium break-all md:block"},g(r,"order_no"),1,null),e("div",null,{class:"grid grid-cols-2 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`Product Name`,1,null),e("div",null,{class:"text-foreground/90 text-sm md:truncate"},r.type===4?`Recharge`:r.subscribe.name||`Unknown Product`,1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`Order Amount`,1,null),e("div",null,{class:"text-foreground text-sm font-medium whitespace-nowrap"},d(A,{get value(){return r.amount},type:"currency",[n]:{value:P(r,"amount"),type:n}},3,"yS_3"),1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},e("div",null,{class:"hidden md:block"},e("span",{class:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-medium whitespace-nowrap ${c(r.status)}`},null,m(r.status),1,null),1,null),1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`Created Time`,1,null),e("div",null,{class:"text-foreground/90 text-sm"},y(r.created_at),1,null)],1,null),e("div",null,{class:"mt-1 grid grid-cols-2 md:mt-0 md:block md:px-3 md:py-4"},[e("div",null,{class:"text-muted-foreground text-xs md:hidden"},`Updated Time`,1,null),e("div",null,{class:"text-foreground/90 text-sm"},r.updated_at?y(r.updated_at):"-",1,null)],1,null),e("div",null,{class:"mt-3 flex justify-end md:mt-0 md:px-3 md:py-4"},e("div",null,{class:"flex flex-wrap justify-end"},[r.status===1&&d(L,{size:"sm",look:"alert",class:"whitespace-nowrap",onClick$:l(()=>o(()=>Promise.resolve().then(()=>G),void 0),"s_cULIvnQEV5U",[_,r]),children:[d(C,{class:"mr-1 h-4 w-4",[n]:{class:n}},3,"yS_4"),`Cancel Order`],[n]:{size:n,look:n,class:n}},1,"yS_5"),d(D,{href:`/order/detail?order_no=${r.order_no}`,get class(){return k({size:"sm",class:"whitespace-nowrap"})},children:[d(j,{class:"mr-1 h-4 w-4",[n]:{class:n}},3,"yS_6"),`View Details`],[n]:{class:n}},1,"yS_7")],1,null),1,null)],1,r.order_no)))],1,"yS_8"):e("div",null,{class:"flex h-40 items-center justify-center"},e("div",null,{class:"text-foreground/70"},`You don't have any orders yet`,1,null),1,null),1,null),[n]:{class:n}},1,"yS_9"),d(u.Footer,{class:"p-5",children:t.orderStore.pagination.total>0&&d(q,{get current(){return t.orderStore.pagination.current},get pageSize(){return t.orderStore.pagination.size},get total(){return t.orderStore.pagination.total},onChange$:a,get disabled(){return t.orderStore.loading.list},[n]:{current:v(r=>r.orderStore.pagination.current,[t]),pageSize:v(r=>r.orderStore.pagination.size,[t]),total:v(r=>r.orderStore.pagination.total,[t]),onChange$:n,disabled:v(r=>r.orderStore.loading.list,[t])}},3,"yS_10"),[n]:{class:n}},1,"yS_11")]},1,"yS_12")},Q=async s=>{const[t,a]=p();await a.handleCloseOrder(s)&&U.success(t.cancelSuccess)},N=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_TIO40PGUL0k:Q},Symbol.toStringTag,{value:"Module"})),F=()=>{const[s,t]=p();s(t.order_no)},G=Object.freeze(Object.defineProperty({__proto__:null,s_cULIvnQEV5U:F},Symbol.toStringTag,{value:"Module"})),H=()=>{const[s]=p();s.fetchOrderList()},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:f,s_j8qL06l3fO8:H},Symbol.toStringTag,{value:"Module"}));export{f as _hW,Q as a,F as b,H as c,ue as s,z as s_HOLw9JkJKRE};
