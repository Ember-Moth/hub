import{u,D as g,o as h,s as P,q as c,d as m,m as d,k as i,l,F as T,_hW as y}from"./q-Q7QTf1-t.js";import{_ as p}from"./q-BKaOGYNW.js";import{C as v,Q as w}from"./q-D-hFNuXB.js";import"./q-R_PFgutd.js";import"./q-CXrtXnGn.js";import"./q-D3Ga_9CS.js";import"./q-Cfw5b693.js";import"./q-CX_U-nEJ.js";import"./q-C6JuRMDH.js";import"./q-B-GNphMI.js";import"./q-DTPKyc3d.js";import"./q-bWKQX6P2.js";import"./q-xouav5_y.js";import"./q-DlwICHcG.js";const j=({track:e})=>{const[r,o]=u();e(()=>o.stripe)&&o.method!=="card"&&r()},x=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_KY4y3kmSexo:j},Symbol.toStringTag,{value:"Module"})),S=async()=>{var a,_;const[e,r,o,n]=u();if(!r.stripe){e(n.card.loading);return}try{let t;if(r.method==="alipay"?t=await r.stripe.confirmAlipayPayment(r.client_secret,{return_url:window.location.href},{handleActions:!1}):r.method==="wechat_pay"&&(t=await r.stripe.confirmWechatPayPayment(r.client_secret,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1})),!t)return;if(t.error)e(t.error.message);else if(t.paymentIntent.status==="requires_action"){const s=t.paymentIntent.next_action,f=r.method==="alipay"?(a=s==null?void 0:s.alipay_handle_redirect)==null?void 0:a.url:(_=s==null?void 0:s.wechat_pay_display_qr_code)==null?void 0:_.image_url_svg;o.value=f||null}}catch{e(n.error)}},b=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_A85jzTiDnWg:S},Symbol.toStringTag,{value:"Module"})),q=e=>{const[r]=u();r.value=e},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_0NTRCUedjOA:q},Symbol.toStringTag,{value:"Module"})),O=e=>{g();const r=h(null),o=h(null),n={error:`Error processing request`,card:{loading:`Please wait for Stripe to load`},qrcode:{alipay:`Please scan the QR code with Alipay to complete payment`,wechat_pay:`Please scan the QR code with WeChat to complete payment`}},a=c(()=>p(()=>Promise.resolve().then(()=>C),void 0),"s_0NTRCUedjOA",[r]);return P(c(()=>p(()=>Promise.resolve().then(()=>x),void 0),"s_KY4y3kmSexo",[c(()=>p(()=>Promise.resolve().then(()=>b),void 0),"s_A85jzTiDnWg",[a,e,o,n]),e])),e.method==="card"?m("div",null,{class:"min-w-80 text-left md:min-w-sm"},d(v,{get clientSecret(){return e.client_secret},onError$:a,get stripe(){return e.stripe},get elements(){return e.elements},[l]:{clientSecret:i(t=>t.client_secret,[e]),onError$:l,stripe:i(t=>t.stripe,[e]),elements:i(t=>t.elements,[e])}},3,"Y2_18"),1,"Y2_19"):o.value?d(T,{children:[d(w,{get text(){return o.value},size:208,[l]:{text:i(t=>t.value,[o]),size:l}},3,"Y2_20"),m("p",null,{class:"text-muted-foreground mt-4 text-center"},n.qrcode[e.method],1,null)]},1,"Y2_21"):m("div",null,null,r.value||`Preparing payment...`,1,null)},L=Object.freeze(Object.defineProperty({__proto__:null,s_oPPZdWVYhuw:O},Symbol.toStringTag,{value:"Module"}));export{y as _hW,L as s,q as s_0NTRCUedjOA,S as s_A85jzTiDnWg,j as s_KY4y3kmSexo,O as s_oPPZdWVYhuw};
