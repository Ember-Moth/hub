import{c as q,v as C,x as k,a as D,q as o,u as E,b as v,E as L,p as g,B as b,e as t,l as w,o as u,m as n,F as O,_ as S}from"./q-gSxxJeWo.js";import{_ as a}from"./q-BKaOGYNW.js";import{B as A,c as P}from"./q-BG3_QTyM.js";import{l as J,I as V,J as Y,K as M}from"./q-B5TFmh5c.js";import{L as I}from"./q-C_B9_CLk.js";import"./q-CvYgVdLJ.js";import{D as j}from"./q-C0whS16-.js";import{u as U}from"./q-DXZy683x.js";import{u as Q}from"./q-CTSOZNae.js";import"./q-DuNBRwv3.js";import"./q-C2B8HMMM.js";import"./q-CRLhHez8.js";import"./q-Am9eSDJS.js";const z={...j,meta:{pre:null,checkout:null}},R=q("portal-order-store"),fe=r=>{const l={...z,...r},e=C(l);return k(R,e),e},F=()=>{const r=D(R),e=J()("/order/detail"),i=U();return{orderStore:r,fetchOrderStatus:o(()=>a(()=>import("./q-CojxfCb0.js"),[]),"s_HUtHYDF8gZI",[r]),fetchPurchaseCheckout:o(()=>a(()=>import("./q-e4kHENBv.js"),[]),"s_9R6QMvt68Oo",[r]),handlePrePurchase:o(()=>a(()=>import("./q-BdMI2vJB.js").then(h=>h.o),[]),"s_RxWHqVzDrEU",[r]),handlePurchase:o(()=>a(()=>import("./q-CIBF06I_.js"),[]),"s_iJ2ojjEs9lI",[i,e,r]),handleResetTraffic:o(()=>a(()=>import("./q-Zu0r0g6Q.js"),[]),"s_SyIR0bmuNUY",[i,e,r]),handleRecharge:o(()=>a(()=>import("./q-DVrw5tU_.js"),[]),"s_dIuWO8clKcE",[i,e,r]),handleRenewal:o(()=>a(()=>import("./q-CoDqEc_s.js"),[]),"s_eFwR5QuTCXQ",[i,e,r])}},Z=async({track:r,cleanup:l})=>{const[e,i,d,f,p]=E(),c=r(()=>p.orderStore.detail);if(c&&c.status===1){const x=new Date(c.created_at).getTime()+9e5,T=async()=>{const _=new Date().getTime(),m=Math.max(0,x-_);e.value=m,d.value=await i(m),m>0?s=setTimeout(h,1e3):(e.value=0,c.status=3)},h=async()=>{const _=new Date().getTime(),m=Math.max(0,x-_);e.value=m,d.value=await i(m),_-f.value>5e3&&c.status===1&&(f.value=_,await p.fetchOrderStatus(c.order_no)),m>0?s=setTimeout(h,1e3):(e.value=0,c.status=3)};let s=setTimeout(T,0);l(()=>{clearTimeout(s)})}},B=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_s3t1uaOwZRY:Z},Symbol.toStringTag,{value:"Module"})),$=async({track:r})=>{var p;const[l,e,i,d,f]=E();if(d.value=new URLSearchParams(window.location.search),l.value=d.value.get("order_no"),r(()=>l.value),l.value){const c=await i.fetchOrderStatus(l.value);((p=c==null?void 0:c.data.data)==null?void 0:p.status)===1?await i.fetchPurchaseCheckout(l.value):await f.fetchUserInfo(),e.value=Date.now()}},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_eEZiCqIUtCY:$},Symbol.toStringTag,{value:"Module"})),H=()=>{var l;const[r]=E();(l=r.orderStore.meta.checkout)!=null&&l.checkout_url&&window.open(r.orderStore.meta.checkout.checkout_url,"_blank")},N=Object.freeze(Object.defineProperty({__proto__:null,s_Upof2y7YdTo:H},Symbol.toStringTag,{value:"Module"})),G=r=>{const l=Math.floor(r/6e4),e=Math.floor(r%6e4/1e3),i=l<10?`0${l}`:`${l}`,d=e<10?`0${e}`:`${e}`;return`${i} : ${d}`},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:S,s_fs6IR0xlS5E:G},Symbol.toStringTag,{value:"Module"})),X=v(o(()=>a(()=>import("./q-B75Za5cr.js"),[]),"s_0cQzxZm726Y")),ee=v(o(()=>a(()=>import("./q-BIFaPAT-.js"),[]),"s_4vNiDqbo0PE")),he=v(o(()=>a(()=>import("./q-B2aJ3elX.js").then(r=>r.a),[]),"s_a4HEiEgp7RA")),xe=v(o(()=>a(()=>import("./q-BGIekEk1.js"),[]),"s_0wLOcAcYiiY")),ve=v(o(()=>a(()=>import("./q-BPNIGA4u.js"),[]),"s_oPPZdWVYhuw")),te=v(o(()=>a(()=>import("./q-Dl-WFecw.js"),[]),"s_0Vqe251Fbs8")),Te=()=>{var x,T,h;L();const r=g(null),l=g(null),e=F(),i=Q(),d=g(0),f=g("00:00:00"),p=g(0),c={1:`Pending Payment`,2:`Paid`,3:`Cancelled`,4:`Closed`,5:`Completed`},y=o(()=>a(()=>Promise.resolve().then(()=>K),void 0),"s_fs6IR0xlS5E");return b(o(()=>a(()=>Promise.resolve().then(()=>W),void 0),"s_eEZiCqIUtCY",[l,p,e,r,i])),b(o(()=>a(()=>Promise.resolve().then(()=>B),void 0),"s_s3t1uaOwZRY",[d,y,f,p,e])),t("div",null,{class:"container md:pb-6"},[t("section",null,{class:"my-8 text-center md:text-left"},[t("h1",null,{class:"text-2xl font-bold"},`Order Details`,1,null),e.orderStore.detail&&t("div",null,{class:"mt-2 gap-2"},t("span",null,{class:"text-muted-foreground text-sm"},[`Order Number`,":"," ",w(s=>s.orderStore.detail.order_no,[e])],1,null),1,"5J_0")],1,null),t("section",null,{class:"flex flex-col md:flex-row"},[t("div",null,{class:"mb-4 min-h-[calc(100vh-188px)] w-full flex-auto md:mr-8 md:mb-0 md:min-h-[calc(100vh-220px)] md:basis-3xl"},e.orderStore.detail?t("div",null,{class:"p-2 md:p-6"},t("div",null,{class:"flex flex-col items-center justify-center gap-4 md:gap-6 md:py-6"},[t("div",null,{class:"text-xl font-bold"},c[e.orderStore.detail.status],1,null),e.orderStore.detail.status===1&&d.value>0&&t("div",null,{class:"flex w-full flex-col items-center"},[t("div",null,{class:"mb-2 text-5xl text-amber-500 md:mb-4 md:text-6xl"},u(V,null,3,"5J_1"),1,null),t("div",null,{class:"text-alert mb-4 text-2xl font-semibold md:mb-6 md:text-3xl"},w(s=>s.value,[f]),3,null),((x=e.orderStore.meta.checkout)==null?void 0:x.type)==="url"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},[t("p",null,null,`Please click the button below to proceed to payment`,1,null),u(A,{class:"w-full md:w-auto",onClick$:o(()=>a(()=>Promise.resolve().then(()=>N),void 0),"s_Upof2y7YdTo",[e]),children:`Go to Payment`,[n]:{class:n,onClick$:n}},1,"5J_2")],1,"5J_3"),((T=e.orderStore.meta.checkout)==null?void 0:T.type)==="qr"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},[t("p",null,null,`Please scan the QR code to complete payment`,1,null),u(ee,{get text(){return e.orderStore.meta.checkout.checkout_url},size:180,class:"mb-2 md:mb-4 md:size-200",[n]:{text:w(s=>s.orderStore.meta.checkout.checkout_url,[e]),size:n,class:n}},3,"5J_4"),t("p",null,{class:"text-muted-foreground text-sm"},`If the QR code is not displayed, please try refreshing the page or use a different browser.`,1,null)],1,"5J_5"),((h=e.orderStore.meta.checkout)==null?void 0:h.type)==="stripe"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},e.orderStore.meta.checkout.stripe&&u(te,{...e.orderStore.meta.checkout.stripe},0,"5J_6"),1,"5J_7"),t("div",null,{class:"text-muted-foreground mt-4 text-center text-sm"},[t("p",null,null,`Please complete the payment within 15 minutes. After this time, the order will be automatically closed.`,1,null),t("p",null,{class:"mt-2"},`After payment is completed, the system will automatically activate the corresponding service.`,1,null),t("p",null,{class:"mt-2"},`If you encounter any payment issues, please contact customer service for assistance.`,1,null)],1,null)],1,"5J_8"),[2,5].includes(e.orderStore.detail.status)&&u(O,{children:[t("div",null,{class:"text-5xl text-green-500 md:text-6xl"},u(Y,null,3,"5J_9"),1,null),t("div",null,{class:"text-muted-foreground text-center text-sm"},[t("p",null,null,`Payment successful! Thank you for your purchase.`,1,null),t("p",null,{class:"mt-2"},`You can view your order and service information in My Subscriptions.`,1,null)],1,null),t("div",null,{class:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-center sm:gap-4"},[u(I,{href:"/user",get class(){return P({class:"w-full sm:w-auto"})},children:`Go to My Subscriptions`,[n]:{href:n,class:n}},1,"5J_10"),u(I,{href:"/pricing",get class(){return P({look:"outline",class:"w-full sm:w-auto"})},children:`Browse Products`,[n]:{href:n,class:n}},1,"5J_11")],1,null)]},1,"5J_12"),[3,4].includes(e.orderStore.detail.status)&&u(O,{children:[t("div",null,{class:"text-alert text-5xl md:text-6xl"},u(M,null,3,"5J_13"),1,null),t("div",null,{class:"text-muted-foreground text-center text-sm"},[t("p",null,null,`The order has been closed. You can make a new purchase or contact customer service for assistance.`,1,null),t("p",null,{class:"mt-2"},`If you believe this is an error, please contact customer support.`,1,null)],1,null),u(I,{href:"/pricing",get class(){return P({look:"outline",class:"w-full sm:w-auto"})},children:`Browse Products`,[n]:{href:n,class:n}},1,"5J_14")]},1,"5J_15")],1,null),1,"5J_16"):t("div",null,{class:"text-muted-foreground rounded-lg p-6 text-center"},`Order information not found`,1,null),1,null),u(X,{get order(){return e.orderStore.detail},get config(){var s,_;return{type:((s=e.orderStore.detail)==null?void 0:s.type)||1,quantity:((_=e.orderStore.detail)==null?void 0:_.quantity)||1}},[n]:{order:w(s=>s.orderStore.detail,[e]),config:w(s=>{var _,m;return{type:((_=s.orderStore.detail)==null?void 0:_.type)||1,quantity:((m=s.orderStore.detail)==null?void 0:m.quantity)||1}},[e])}},3,"5J_17")],1,null)],1,"5J_18")};export{xe as C,X as O,ee as Q,he as S,S as _hW,fe as a,ve as b,H as c,G as d,Te as e,$ as s,Z as s_s3t1uaOwZRY,F as u};
