import{_ as a}from"./q-BKaOGYNW.js";import{E as g,p as x,o,m as e,q as _,e as r,l as v,u as b,_ as y}from"./q-gSxxJeWo.js";import{R as u,c as T,B as M}from"./q-BG3_QTyM.js";import{a9 as w}from"./q-B5TFmh5c.js";import{F as I}from"./q-X_lghi-t.js";import"./q-CvYgVdLJ.js";import{u as k}from"./q-CsgGrl1E.js";import{u as C}from"./q-CTSOZNae.js";import{t as m}from"./q-CRLhHez8.js";import"./q-DuNBRwv3.js";import"./q-C_B9_CLk.js";import"./q-C2B8HMMM.js";import"./q-DXZy683x.js";import"./q-Am9eSDJS.js";import"./q-C0whS16-.js";const O=()=>{var p,f,h;g();const s=k(),t=C(),n=x(!1),l=((p=s.subscribeStore.selected)==null?void 0:p.id)||0,c=((h=(f=s.subscribeStore.selected)==null?void 0:f.subscribe)==null?void 0:h.allow_deduction)||!1,i={notAllowed:`This subscription cannot be cancelled`,unsubSuccess:`Subscription successfully cancelled`,unsubFailed:`Failed to cancel subscription`},S=_(()=>a(()=>Promise.resolve().then(()=>P),void 0),"s_s0v0x8k3fhk",[c,l,i,n,s]);return c?o(u.Root,{"bind:show":n,onShow$:_(()=>a(()=>Promise.resolve().then(()=>L),void 0),"s_epQtZqIS6vs",[n]),onClose$:_(()=>a(()=>Promise.resolve().then(()=>D),void 0),"s_OuDnnnmikM4",[n]),closeOnBackdropClick:!0,children:[o(u.Trigger,{class:"hover:border-alert hover:bg-secondary/80 flex h-full w-full cursor-pointer flex-col justify-center rounded-md border p-3 text-center",onClick$:S,children:[r("div",null,{class:"bg-alert/20 mx-auto mb-2 flex h-10 w-10 items-center justify-center rounded-md text-red-400"},o(w,{class:"h-5 w-5",[e]:{class:e}},3,"M0_12"),1,null),r("h5",null,{class:"text-card-foreground text-sm font-medium"},`Cancel Subscription`,1,null)],[e]:{class:e,onClick$:e}},1,"M0_13"),o(u.Panel,{class:"max-w-md",children:[o(u.Title,{children:`Cancel Subscription`},1,"M0_14"),o(u.Description,{children:`Are you sure you want to cancel this subscription?`},1,"M0_15"),r("div",null,{class:"mt-4"},s.subscribeStore.meta.unsubscribe&&r("div",null,{class:"rounded-md border p-4"},[`You will receive a refund of`,":"," ",r("span",null,{class:"text-primary font-medium"},o(I,{get value(){return s.subscribeStore.meta.unsubscribe.deduction_amount},type:"currency",[e]:{value:v(d=>d.subscribeStore.meta.unsubscribe.deduction_amount,[s]),type:e}},3,"M0_16"),1,null),r("p",null,{class:"text-alert text-sm"},`Note: After cancelling the subscription, it cannot be restored. Please proceed with caution.`,1,null)],1,"M0_17"),1,null),r("footer",null,{class:"flex justify-end space-x-3 pt-2"},[o(u.Close,{get class(){return T({look:"outline",size:"sm"})},children:`Cancel`,[e]:{class:e}},1,"M0_18"),o(M,{look:"alert",size:"sm",get loading(){return s.subscribeStore.loading.update},onClick$:_(()=>a(()=>Promise.resolve().then(()=>A),void 0),"s_6mL0qCuZto8",[l,i,n,s,t]),children:`Confirm Cancellation`,[e]:{look:e,size:e,loading:v(d=>d.subscribeStore.loading.update,[s])}},1,"M0_19")],1,null)],[e]:{class:e}},1,"M0_20")],[e]:{"bind:show":e,onShow$:e,onClose$:e,closeOnBackdropClick:e}},1,"M0_21"):null},X=Object.freeze(Object.defineProperty({__proto__:null,s_dGRHfYzA0hQ:O},Symbol.toStringTag,{value:"Module"})),q=async()=>{const[s,t,n,l,c]=b();if(!s)return m.error(n.notAllowed);await c.handlePreUnsubscribe(t),l.value=!0},P=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_s0v0x8k3fhk:q},Symbol.toStringTag,{value:"Module"})),j=async()=>{const[s,t,n,l,c]=b(),i=await l.handleUnsubscribe(s);n.value=!1,i?(m.success(t.unsubSuccess),c.fetchUserInfo()):m.error(t.unsubFailed)},A=Object.freeze(Object.defineProperty({__proto__:null,s_6mL0qCuZto8:j},Symbol.toStringTag,{value:"Module"})),z=()=>{const[s]=b();s.value=!1,document.body.style.overflow="auto"},D=Object.freeze(Object.defineProperty({__proto__:null,s_OuDnnnmikM4:z},Symbol.toStringTag,{value:"Module"})),E=()=>{const[s]=b();s.value=!0},L=Object.freeze(Object.defineProperty({__proto__:null,s_epQtZqIS6vs:E},Symbol.toStringTag,{value:"Module"}));export{j as a,z as b,E as c,X as d,q as s,O as s_dGRHfYzA0hQ};
