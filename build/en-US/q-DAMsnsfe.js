import{u,E as g,p as h,t as P,q as c,e as m,o as p,l as i,m as l,F as T,_ as y}from"./q-gSxxJeWo.js";import{_ as d}from"./q-BKaOGYNW.js";import{C as v,Q as w}from"./q-BROdRmjX.js";import"./q-CvYgVdLJ.js";import"./q-BG3_QTyM.js";import"./q-DuNBRwv3.js";import"./q-B5TFmh5c.js";import"./q-C_B9_CLk.js";import"./q-C2B8HMMM.js";import"./q-CRLhHez8.js";import"./q-DXZy683x.js";import"./q-Am9eSDJS.js";import"./q-C0whS16-.js";import"./q-CTSOZNae.js";const x=({track:e})=>{const[r,n]=u();e(()=>n.stripe)&&n.method!=="card"&&r()},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_KY4y3kmSexo:x},Symbol.toStringTag,{value:"Module"})),q=async()=>{var s,_;const[e,r,n,o]=u();if(!r.stripe){e(o.card.loading);return}try{let t;if(r.method==="alipay"?t=await r.stripe.confirmAlipayPayment(r.client_secret,{return_url:window.location.href},{handleActions:!1}):r.method==="wechat_pay"&&(t=await r.stripe.confirmWechatPayPayment(r.client_secret,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1})),!t)return;if(t.error)e(t.error.message);else if(t.paymentIntent.status==="requires_action"){const a=t.paymentIntent.next_action,f=r.method==="alipay"?(s=a==null?void 0:a.alipay_handle_redirect)==null?void 0:s.url:(_=a==null?void 0:a.wechat_pay_display_qr_code)==null?void 0:_.image_url_svg;n.value=f||null}}catch{e(o.error)}},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_A85jzTiDnWg:q},Symbol.toStringTag,{value:"Module"})),E=e=>{const[r]=u();r.value=e},b=Object.freeze(Object.defineProperty({__proto__:null,_hW:y,s_0NTRCUedjOA:E},Symbol.toStringTag,{value:"Module"})),V=e=>{g();const r=h(null),n=h(null),o={error:`Error processing request`,card:{loading:`Please wait for Stripe to load`},qrcode:{alipay:`Please scan the QR code with Alipay to complete payment`,wechat_pay:`Please scan the QR code with WeChat to complete payment`}},s=c(()=>d(()=>Promise.resolve().then(()=>b),void 0),"s_0NTRCUedjOA",[r]);return P(c(()=>d(()=>Promise.resolve().then(()=>j),void 0),"s_KY4y3kmSexo",[c(()=>d(()=>Promise.resolve().then(()=>S),void 0),"s_A85jzTiDnWg",[s,e,n,o]),e])),e.method==="card"?m("div",null,{class:"min-w-80 text-left md:min-w-sm"},p(v,{get clientSecret(){return e.client_secret},onError$:s,get stripe(){return e.stripe},get elements(){return e.elements},[l]:{clientSecret:i(t=>t.client_secret,[e]),onError$:l,stripe:i(t=>t.stripe,[e]),elements:i(t=>t.elements,[e])}},3,"Y2_18"),1,"Y2_19"):n.value?p(T,{children:[p(w,{get text(){return n.value},size:208,[l]:{text:i(t=>t.value,[n]),size:l}},3,"Y2_20"),m("p",null,{class:"text-muted-foreground mt-4 text-center"},o.qrcode[e.method],1,null)]},1,"Y2_21"):m("div",null,null,r.value||`Preparing payment...`,1,null)};export{y as _hW,E as a,V as b,q as s,x as s_KY4y3kmSexo};
