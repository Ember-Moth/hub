import{c as q,t as k,v as C,a as D,q as n,u as S,b as v,D as L,o as g,A as b,d as t,k as y,m as d,l as i,F as O,_hW as E}from"./q-Q7QTf1-t.js";import{_ as a}from"./q-BKaOGYNW.js";import{B as A,c as P}from"./q-CXrtXnGn.js";import{l as J,I as V,J as j,K as M}from"./q-Cfw5b693.js";import{L as I}from"./q-CX_U-nEJ.js";import"./q-R_PFgutd.js";import{D as Y}from"./q-xouav5_y.js";import{u as U}from"./q-DTPKyc3d.js";import{u as z}from"./q-DlwICHcG.js";import"./q-D3Ga_9CS.js";import"./q-C6JuRMDH.js";import"./q-B-GNphMI.js";import"./q-bWKQX6P2.js";const Q={...Y,meta:{pre:null,checkout:null}},R=q("portal-order-store"),he=r=>{const l={...Q,...r},e=k(l);return C(R,e),e},F=()=>{const r=D(R),e=J()("/order/detail"),c=U();return{orderStore:r,fetchOrderStatus:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.k),[]),"s_HUtHYDF8gZI",[r]),fetchPurchaseCheckout:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.m),[]),"s_9R6QMvt68Oo",[r]),handlePrePurchase:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.o),[]),"s_RxWHqVzDrEU",[r]),handlePurchase:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.i),[]),"s_iJ2ojjEs9lI",[c,e,r]),handleResetTraffic:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.h),[]),"s_SyIR0bmuNUY",[c,e,r]),handleRecharge:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.l),[]),"s_dIuWO8clKcE",[c,e,r]),handleRenewal:n(()=>a(()=>import("./q-BPzdysT6.js").then(o=>o.j),[]),"s_eFwR5QuTCXQ",[c,e,r])}},Z=async({track:r,cleanup:l})=>{const[e,c,_,h,f]=S(),u=r(()=>f.orderStore.detail);if(u&&u.status===1){const x=new Date(u.created_at).getTime()+9e5,T=async()=>{const m=new Date().getTime(),p=Math.max(0,x-m);e.value=p,_.value=await c(p),p>0?s=setTimeout(o,1e3):(e.value=0,u.status=3)},o=async()=>{const m=new Date().getTime(),p=Math.max(0,x-m);e.value=p,_.value=await c(p),m-h.value>5e3&&u.status===1&&(h.value=m,await f.fetchOrderStatus(u.order_no)),p>0?s=setTimeout(o,1e3):(e.value=0,u.status=3)};let s=setTimeout(T,0);l(()=>{clearTimeout(s)})}},W=Object.freeze(Object.defineProperty({__proto__:null,_hW:E,s_s3t1uaOwZRY:Z},Symbol.toStringTag,{value:"Module"})),$=async({track:r})=>{var f;const[l,e,c,_,h]=S();if(_.value=new URLSearchParams(window.location.search),l.value=_.value.get("order_no"),r(()=>l.value),l.value){const u=await c.fetchOrderStatus(l.value);((f=u==null?void 0:u.data.data)==null?void 0:f.status)===1?await c.fetchPurchaseCheckout(l.value):await h.fetchUserInfo(),e.value=Date.now()}},B=Object.freeze(Object.defineProperty({__proto__:null,_hW:E,s_eEZiCqIUtCY:$},Symbol.toStringTag,{value:"Module"})),H=()=>{var l;const[r]=S();(l=r.orderStore.meta.checkout)!=null&&l.checkout_url&&window.open(r.orderStore.meta.checkout.checkout_url,"_blank")},N=Object.freeze(Object.defineProperty({__proto__:null,s_Upof2y7YdTo:H},Symbol.toStringTag,{value:"Module"})),G=r=>{const l=Math.floor(r/6e4),e=Math.floor(r%6e4/1e3),c=l<10?`0${l}`:`${l}`,_=e<10?`0${e}`:`${e}`;return`${c} : ${_}`},K=Object.freeze(Object.defineProperty({__proto__:null,_hW:E,s_fs6IR0xlS5E:G},Symbol.toStringTag,{value:"Module"})),X=v(n(()=>a(()=>import("./q-b--eSI-h.js"),[]),"s_0cQzxZm726Y")),ee=v(n(()=>a(()=>import("./q-Bt0GhxKU.js").then(r=>r.q),[]),"s_4vNiDqbo0PE")),xe=v(n(()=>a(()=>import("./q-CYIM2LIQ.js"),[]),"s_a4HEiEgp7RA")),ve=v(n(()=>a(()=>import("./q-FOlCsPf6.js").then(r=>r.s),[]),"s_0wLOcAcYiiY")),Te=v(n(()=>a(()=>import("./q-Bb6atGTR.js").then(r=>r.s),[]),"s_oPPZdWVYhuw")),te=v(n(()=>a(()=>import("./q-DYU_hFou.js").then(r=>r.s),[]),"s_0Vqe251Fbs8")),re=()=>{var x,T,o;L();const r=g(null),l=g(null),e=F(),c=z(),_=g(0),h=g("00:00:00"),f=g(0),u={1:`Pending Payment`,2:`Paid`,3:`Cancelled`,4:`Closed`,5:`Completed`},w=n(()=>a(()=>Promise.resolve().then(()=>K),void 0),"s_fs6IR0xlS5E");return b(n(()=>a(()=>Promise.resolve().then(()=>B),void 0),"s_eEZiCqIUtCY",[l,f,e,r,c])),b(n(()=>a(()=>Promise.resolve().then(()=>W),void 0),"s_s3t1uaOwZRY",[_,w,h,f,e])),t("div",null,{class:"container md:pb-6"},[t("section",null,{class:"my-8 text-center md:text-left"},[t("h1",null,{class:"text-2xl font-bold"},`Order Details`,1,null),e.orderStore.detail&&t("div",null,{class:"mt-2 gap-2"},t("span",null,{class:"text-muted-foreground text-sm"},[`Order Number`,":"," ",y(s=>s.orderStore.detail.order_no,[e])],1,null),1,"5J_0")],1,null),t("section",null,{class:"flex flex-col md:flex-row"},[t("div",null,{class:"mb-4 min-h-[calc(100vh-188px)] w-full flex-auto md:mr-8 md:mb-0 md:min-h-[calc(100vh-220px)] md:basis-3xl"},e.orderStore.detail?t("div",null,{class:"p-2 md:p-6"},t("div",null,{class:"flex flex-col items-center justify-center gap-4 md:gap-6 md:py-6"},[t("div",null,{class:"text-xl font-bold"},u[e.orderStore.detail.status],1,null),e.orderStore.detail.status===1&&_.value>0&&t("div",null,{class:"flex w-full flex-col items-center"},[t("div",null,{class:"mb-2 text-5xl text-amber-500 md:mb-4 md:text-6xl"},d(V,null,3,"5J_1"),1,null),t("div",null,{class:"text-alert mb-4 text-2xl font-semibold md:mb-6 md:text-3xl"},y(s=>s.value,[h]),3,null),((x=e.orderStore.meta.checkout)==null?void 0:x.type)==="url"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},[t("p",null,null,`Please click the button below to proceed to payment`,1,null),d(A,{class:"w-full md:w-auto",onClick$:n(()=>a(()=>Promise.resolve().then(()=>N),void 0),"s_Upof2y7YdTo",[e]),children:`Go to Payment`,[i]:{class:i,onClick$:i}},1,"5J_2")],1,"5J_3"),((T=e.orderStore.meta.checkout)==null?void 0:T.type)==="qr"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},[t("p",null,null,`Please scan the QR code to complete payment`,1,null),d(ee,{get text(){return e.orderStore.meta.checkout.checkout_url},size:180,class:"mb-2 md:mb-4 md:size-200",[i]:{text:y(s=>s.orderStore.meta.checkout.checkout_url,[e]),size:i,class:i}},3,"5J_4"),t("p",null,{class:"text-muted-foreground text-sm"},`If the QR code is not displayed, please try refreshing the page or use a different browser.`,1,null)],1,"5J_5"),((o=e.orderStore.meta.checkout)==null?void 0:o.type)==="stripe"&&t("div",null,{class:"flex flex-col items-center gap-3 md:gap-4"},e.orderStore.meta.checkout.stripe&&d(te,{...e.orderStore.meta.checkout.stripe},0,"5J_6"),1,"5J_7"),t("div",null,{class:"text-muted-foreground mt-4 text-center text-sm"},[t("p",null,null,`Please complete the payment within 15 minutes. After this time, the order will be automatically closed.`,1,null),t("p",null,{class:"mt-2"},`After payment is completed, the system will automatically activate the corresponding service.`,1,null),t("p",null,{class:"mt-2"},`If you encounter any payment issues, please contact customer service for assistance.`,1,null)],1,null)],1,"5J_8"),[2,5].includes(e.orderStore.detail.status)&&d(O,{children:[t("div",null,{class:"text-5xl text-green-500 md:text-6xl"},d(j,null,3,"5J_9"),1,null),t("div",null,{class:"text-muted-foreground text-center text-sm"},[t("p",null,null,`Payment successful! Thank you for your purchase.`,1,null),t("p",null,{class:"mt-2"},`You can view your order and service information in My Subscriptions.`,1,null)],1,null),t("div",null,{class:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-center sm:gap-4"},[d(I,{href:"/user",get class(){return P({class:"w-full sm:w-auto"})},children:`Go to My Subscriptions`,[i]:{href:i,class:i}},1,"5J_10"),d(I,{href:"/pricing",get class(){return P({look:"outline",class:"w-full sm:w-auto"})},children:`Browse Products`,[i]:{href:i,class:i}},1,"5J_11")],1,null)]},1,"5J_12"),[3,4].includes(e.orderStore.detail.status)&&d(O,{children:[t("div",null,{class:"text-alert text-5xl md:text-6xl"},d(M,null,3,"5J_13"),1,null),t("div",null,{class:"text-muted-foreground text-center text-sm"},[t("p",null,null,`The order has been closed. You can make a new purchase or contact customer service for assistance.`,1,null),t("p",null,{class:"mt-2"},`If you believe this is an error, please contact customer support.`,1,null)],1,null),d(I,{href:"/pricing",get class(){return P({look:"outline",class:"w-full sm:w-auto"})},children:`Browse Products`,[i]:{href:i,class:i}},1,"5J_14")]},1,"5J_15")],1,null),1,"5J_16"):t("div",null,{class:"text-muted-foreground rounded-lg p-6 text-center"},`Order information not found`,1,null),1,null),d(X,{get order(){return e.orderStore.detail},get config(){var s,m;return{type:((s=e.orderStore.detail)==null?void 0:s.type)||1,quantity:((m=e.orderStore.detail)==null?void 0:m.quantity)||1}},[i]:{order:y(s=>s.orderStore.detail,[e]),config:y(s=>{var m,p;return{type:((m=s.orderStore.detail)==null?void 0:m.type)||1,quantity:((p=s.orderStore.detail)==null?void 0:p.quantity)||1}},[e])}},3,"5J_17")],1,null)],1,"5J_18")},ge=Object.freeze(Object.defineProperty({__proto__:null,s_wmWxeW6rxd0:re},Symbol.toStringTag,{value:"Module"}));export{ve as C,X as O,ee as Q,xe as S,E as _hW,he as a,Te as b,ge as i,H as s_Upof2y7YdTo,$ as s_eEZiCqIUtCY,G as s_fs6IR0xlS5E,Z as s_s3t1uaOwZRY,re as s_wmWxeW6rxd0,F as u};
