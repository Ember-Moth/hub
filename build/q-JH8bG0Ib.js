import{a as E,q as s,u,o as x,I as k,r as D,A as O,j,k as b,l as v,_hW as c}from"./q-Q7QTf1-t.js";import{_ as r}from"./q-BKaOGYNW.js";import{c as w,u as T}from"./q-DAeZLEpY.js";class oe{constructor(t,e){this.isMultiple=t,this.initialValue=e}add(t){return this.isMultiple?[...Array.isArray(this.initialValue)?[...this.initialValue]:[],t]:t}remove(t){return this.isMultiple&&Array.isArray(this.initialValue)?this.initialValue.filter(e=>e!==t):""}toggle(t){if(this.isMultiple){const e=Array.isArray(this.initialValue)?[...this.initialValue]:[];return e.includes(t)?e.filter(o=>o!==t):[...e,t]}return this.initialValue===t?"":t}}function L(){const i=E(w);return{getNextEnabledItemIndex$:s(()=>r(()=>import("./q-OYNLd1lH.js").then(n=>n.u),[]),"s_YUEhdQ10vgw",[i]),getPrevEnabledItemIndex$:s(()=>r(()=>import("./q-OYNLd1lH.js").then(n=>n.a),[]),"s_vbX1JOQ99lY",[i]),selectionManager$:s(()=>r(()=>import("./q-OYNLd1lH.js").then(n=>n.c),[]),"s_qfnNgkaxccI",[i]),filterManager$:s(()=>r(()=>import("./q-OYNLd1lH.js").then(n=>n.b),[]),"s_bz116YTv9K0",[i])}}const R=()=>{const[i,t]=u();return(i==null?void 0:i.value)??t.value??""},B=Object.freeze(Object.defineProperty({__proto__:null,s_x0BkzOir6QM:R},Symbol.toStringTag,{value:"Module"})),C=async i=>{const[t]=u();if(t.mode==="inline"||t.isListboxOpenSig.value){const e=t.highlightedIndexSig.value??-1;t.highlightedIndexSig.value=await i(e)}else t.isListboxOpenSig.value=!0},U=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_bB0CYZUGkDI:C},Symbol.toStringTag,{value:"Module"})),q=async i=>{const[t,e,o,a]=u();if(!e.itemsMapSig.value)return;e.isKeyboardFocusSig.value=!0,i.key==="Backspace"&&(a.value=e.inputValueSig.value.length===0);const n=s(()=>r(()=>Promise.resolve().then(()=>U),void 0),"s_bB0CYZUGkDI",[e]);switch(i.key){case"ArrowDown":await n(t.getNextEnabledItemIndex$);break;case"ArrowUp":await n(t.getPrevEnabledItemIndex$);break;case"Home":e.isListboxOpenSig.value&&(e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1));break;case"End":if(e.isListboxOpenSig.value){const d=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size);e.highlightedIndexSig.value=d}break;case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"Enter":if(!e.isListboxOpenSig.value&&e.mode!=="inline"||(await t.selectionManager$(e.highlightedIndexSig.value,"toggle"),e.selectedValuesSig.value.length<=0))return;if(!e.multiple){if(e.mode==="inline")return;e.isListboxOpenSig.value=!1;return}e.inputRef.value&&(e.inputRef.value.value="",e.inputValueSig.value="",o.value=!0);break}if(e.highlightedIndexSig.value===null){i.key==="ArrowDown"?e.highlightedIndexSig.value=await t.getNextEnabledItemIndex$(-1):i.key==="ArrowUp"&&(e.highlightedIndexSig.value=await t.getPrevEnabledItemIndex$(e.itemsMapSig.value.size));return}},z=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_BSbCR05jMTc:q},Symbol.toStringTag,{value:"Module"})),H=function(){const[t,e]=u(),{selectedValuesSig:o,multiple:a,itemsMapSig:n,highlightedIndexSig:d}=t,_=o.value,p=[];for(const[m,g]of n.value.entries())if((a?Array.isArray(_)&&_.includes(g.value):g.value===_)&&(p.push(g.displayValue),d.value=m,!a))break;e.value=a?p:p[0]||""},N=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_rOsU60ohN18:H},Symbol.toStringTag,{value:"Module"})),K=function(){const[t]=u();t.mode==="inline"&&(t.highlightedIndexSig.value=0)},Z=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_P84l9BDaqIA:K},Symbol.toStringTag,{value:"Module"})),Q=i=>{const[t,e,o]=u();if(i.key==="Backspace"){if(!t.multiple||t.selectedValuesSig.value.length===0||!t.removeOnBackspace)return;if((o.value||e.value)&&t.inputValueSig.value.length===0){const a=[...t.selectedValuesSig.value];a.pop(),t.selectedValuesSig.value=a}}},Y=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_Odi8LAZN0ok:Q},Symbol.toStringTag,{value:"Module"})),J=()=>{const[i]=u();if(!i.isListboxOpenSig.value&&i.mode==="popover")return"";const t=i.highlightedIndexSig.value;if(t===null||t===-1)return"";const e=i.itemsMapSig.value.get(t);return!e||e.disabled?"":`${i.localId}-${t}`},G=Object.freeze(Object.defineProperty({__proto__:null,s_eak4JP4vopM:J},Symbol.toStringTag,{value:"Module"})),W=({"bind:value":i,...t})=>{const e=E(w),o={context:e,givenContextRef:e.inputRef},a=T(t.ref,o),n=`${e.localId}-panel`,d=`${e.localId}-inline`,_=`${e.localId}-input`,p=`${e.localId}-label`,m=`${e.localId}-description`,g=`${e.localId}-error-message`,I=x(),f=x(!1),h=x(!1),P=L(),S=k(s(()=>r(()=>Promise.resolve().then(()=>G),void 0),"s_eak4JP4vopM",[e])),A=D(l=>{["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"].includes(l.key)&&l.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","Home","End","PageDown","PageUp","Enter"];if(keys.includes(e.key)){e.preventDefault();}}'),V=s(()=>r(()=>Promise.resolve().then(()=>z),void 0),"s_BSbCR05jMTc",[P,e,h,f]),M=s(()=>r(()=>Promise.resolve().then(()=>X),void 0),"s_wZ2h0er7sbk",[e,i,h]),$=s(()=>r(()=>Promise.resolve().then(()=>Y),void 0),"s_Odi8LAZN0ok",[e,h,f]);O(s(()=>r(()=>Promise.resolve().then(()=>Z),void 0),"s_P84l9BDaqIA",[e])),O(s(()=>r(()=>Promise.resolve().then(()=>N),void 0),"s_rOsU60ohN18",[e,I]));const y=k(s(()=>r(()=>Promise.resolve().then(()=>B),void 0),"s_x0BkzOir6QM",[i,I]));return j("input",{role:"combobox",get value(){return y.value},id:_,get"aria-activedescendant"(){return S.value},get"aria-expanded"(){return e.isExpandedSig.value},"aria-controls":e.mode==="inline"?d:n,"aria-labelledby":p,"aria-describedby":`${m} 
        ${g}`,"aria-autocomplete":"list",get"aria-haspopup"(){return e.mode==="inline"?void 0:"listbox"},ref:a,autocomplete:"off",placeholder:e.placeholder??t.placeholder??void 0,"data-combobox-input":!0,get"data-invalid"(){return e.isInvalidSig.value?"":void 0},...t,onKeyDown$:[A,V,t.onKeyDown$],onKeyUp$:[e.removeOnBackspace?$:void 0,t.onKeyUp$],onInput$:[M,t.onInput$]},{role:v,value:b(l=>l.value,[y]),"aria-activedescendant":b(l=>l.value,[S]),"aria-expanded":b(l=>l.isExpandedSig.value,[e]),"aria-autocomplete":v,"aria-haspopup":b(l=>l.mode==="inline"?void 0:"listbox",[e]),autocomplete:v,"data-combobox-input":v,"data-invalid":b(l=>l.isInvalidSig.value?"":void 0,[e])},0,"In_0")},ae=Object.freeze(Object.defineProperty({__proto__:null,s_ybWA4Hisd7M:W},Symbol.toStringTag,{value:"Module"})),F=async(i,t)=>{const[e,o,a]=u(),n=i.target;e.inputValueSig.value=n.value,a.value=!1,n.value===""&&!e.multiple?e.selectedValuesSig.value="":e.isListboxOpenSig.value=!0,o&&(o.value=t.value,e.inputValueSig.value=t.value),e.mode!=="inline"&&(e.highlightedIndexSig.value=null)},X=Object.freeze(Object.defineProperty({__proto__:null,_hW:c,s_wZ2h0er7sbk:F},Symbol.toStringTag,{value:"Module"}));export{oe as V,c as _hW,ae as c,q as s_BSbCR05jMTc,Q as s_Odi8LAZN0ok,K as s_P84l9BDaqIA,C as s_bB0CYZUGkDI,J as s_eak4JP4vopM,H as s_rOsU60ohN18,F as s_wZ2h0er7sbk,R as s_x0BkzOir6QM,W as s_ybWA4Hisd7M,L as u};
